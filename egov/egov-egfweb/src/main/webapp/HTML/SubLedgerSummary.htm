#-------------------------------------------------------------------------------
# eGov suite of products aim to improve the internal efficiency,transparency, 
#      accountability and the service delivery of the government  organizations.
#   
#       Copyright (C) <2015>  eGovernments Foundation
#   
#       The updated version of eGov suite of products as by eGovernments Foundation 
#       is available at http://www.egovernments.org
#   
#       This program is free software: you can redistribute it and/or modify
#       it under the terms of the GNU General Public License as published by
#       the Free Software Foundation, either version 3 of the License, or
#       any later version.
#   
#       This program is distributed in the hope that it will be useful,
#       but WITHOUT ANY WARRANTY; without even the implied warranty of
#       MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
#       GNU General Public License for more details.
#   
#       You should have received a copy of the GNU General Public License
#       along with this program. If not, see http://www.gnu.org/licenses/ or 
#       http://www.gnu.org/licenses/gpl.html .
#   
#       In addition to the terms of the GPL license to be adhered to in using this
#       program, the following additional terms are to be complied with:
#   
#   	1) All versions of this program, verbatim or modified must carry this 
#   	   Legal Notice.
#   
#   	2) Any misrepresentation of the origin of the material is prohibited. It 
#   	   is required that all modified versions of this material be marked in 
#   	   reasonable ways as different from the original version.
#   
#   	3) This license does not grant any rights to any user of the program 
#   	   with regards to rights under trademark law for use of the trade names 
#   	   or trademarks of eGovernments Foundation.
#   
#     In case of any queries, you can reach eGovernments Foundation at contact@egovernments.org.
#-------------------------------------------------------------------------------
<!doctype html public "-//W3C//DTD HTML 4.0 Transitional//EN">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
<meta http-equiv="KEYWORDS" content="">
<meta http-equiv="DESCRIPTION" content="">
<!-- Inclusion of the CSS files that contains the styles -->
<link rel="stylesheet" href="../css/egov.css" type="text/css" />
<!-- <link rel="stylesheet" href="../css/lockRowHead.css" type="text/css" /> -->
<!-- <link rel=stylesheet href="../exility/global.css" type="text/css"> -->
<SCRIPT LANGUAGE="javascript" SRC="../exility/PageManager.js"></SCRIPT>
<SCRIPT LANGUAGE="javascript" SRC="../exility/ExilityParameters.js"></SCRIPT>
<SCRIPT LANGUAGE="javascript" SRC="../exility/PageValidator.js"></SCRIPT>
<script language="javascript" src="../script/jsCommonMethods.js"></script>
<SCRIPT type="text/javascript" src="../script/calendar.js" type="text/javascript" ></SCRIPT>

<SCRIPT LANGUAGE="javascript">
var flag='0', tbNames, tbIds;
var rptType;
var rptTitle='', rptStartDate='', rptEndDate='', rptGLCode='', rptAccName='', detail='';
//onLoad

function onBodyLoad(){
	PageValidator.addCalendars();
	PageManager.ListService.callListService();
	PageManager.DataService.callDataService('cgNumber');
}

function ButtonPress(){

	var strtDate = document.getElementById('startDate').value;
	rptStartDate = strtDate;
	var endDate = document.getElementById('EndDate').value;
	rptEndDate = endDate;
	var dbDate=document.getElementById('databaseDate').value;
				if(compareDate(formatDateToDDMMYYYY1(endDate),formatDateToDDMMYYYY1(dbDate)) == -1 )
				{
				alert('End Date should be less than or equal to '+dbDate);
				document.getElementById('EndDate').focus();
				return false;
				}
	if( compareDate(formatDate6(strtDate),formatDate6(endDate)) == -1 ){
		alert('Start Date cannot be greater than End Date');
		document.getElementById('startDate').focus();
		return false;
	}
	if (!PageValidator.validateForm())
		return;
		PageManager.DataService.removeQueryField('glCode');
		PageManager.DataService.removeQueryField('startDate');
		PageManager.DataService.removeQueryField('endDate');
		PageManager.DataService.removeQueryField('fund_id');
		PageManager.DataService.setQueryField('glCode', document.getElementById('accCode').value);
		//PageManager.DataService.setQueryField('startDate', document.getElementById('startDate').value);
		//PageManager.DataService.setQueryField('endDate', document.getElementById('endDate').value);
		PageManager.DataService.setQueryField('startDate', formatDate1(rptStartDate));
		PageManager.DataService.setQueryField('endDate', formatDate1(rptEndDate));
		var fObj = document.getElementById('fund_id');
		PageManager.DataService.setQueryField('fund_id', fObj.options[fObj.selectedIndex].value);
		PageManager.DataService.callDataService('rptSubLedgerSchedule');
		rptTitle = '<font size=3><b>SubLedger Schedule</b></font><br>' + rptAccName + '<br>' + rptStartDate + ' to ' + rptEndDate ;
		document.getElementById('rptHeader').innerHTML = rptTitle;
}


function openSearch(obj,index){
	 var a = new Array(2);
		var screenName="report";
		var str="";


	str = "Search.html?tableNameForCode=chartofaccounts_controlcodes";


	 var sRtn = showModalDialog(str,"","dialogLeft=300;dialogTop=210;dialogWidth=305pt;dialogHeight=300pt;status=no;");
     if (index==1){
		a = sRtn.split("`~`");
		var type = document.getElementById('accCode');
		type.value = a[0];
		rptGLCode = a[0];
		rptAccName = a[1];
		document.getElementById('chartOfAccounts_id').value = a[2];

	}

}



function beforeRefreshPage(dc){
	var accName = dc.values['accName'];
	if(accName != null && accName != '')
		rptAccName = dc.values['accName'];

	PageManager.DataService.removeQueryField('glCode');

}
function afterRefreshPage(dc)
{

			var startDate=document.getElementById('startDate').value;
			var EndDate=document.getElementById('endDate').value;
			if(startDate && startDate.length!=0)
					{
					var startDate=dc.values['startDate'];
					//alert("VouDateFrom"+formatDateToDDMMYYYY5(VouDateFrom)+" VouDateTo"+formatDateToDDMMYYYY5(VouDateTo));
					startDate=formatDateToDDMMYYYY5(startDate);
					document.getElementById('startDate').value=startDate;
					}

				if(EndDate && EndDate.length!=0)
				{
					var EndDate=dc.values['endDate'];
					EndDate=formatDateToDDMMYYYY5(EndDate);
					document.getElementById('endDate').value=EndDate;
				}

	if(dc.values['reportCodeFailed']){
		alert(dc.values['reportCodeFailed']);
	}
	PageManager.DataService.removeQueryField('startDate');
	PageManager.DataService.removeQueryField('endDate');

	var ulbName='';
	if(dc.values['ULBName'] != null) ulbName='<font size=4><b>' + dc.values['ULBName'];
	document.getElementById('rptHeader').innerHTML = ulbName + '</b></font><br>' + document.getElementById('rptHeader').innerHTML;
	//changeRowColor();
}
function changeRowColor(){

		var obj=document.getElementById('gridGLDetail');
		for(var i=1;i<obj.rows.length;i++){
			var colObj=PageManager.DataService.getControlInBranch(obj.rows[i],'colorFlag');
			if(colObj.innerHTML=="1"){
				var rowObj=PageManager.DataService.getRow(colObj);
				rowObj.className='rowRev';
			}
		}

}





</SCRIPT>
</head>
<body bgcolor="#ffffff" bottommargin="0" topmargin="0" rightmargin="0" leftmargin="0" marginheight="0" marginwidth="0" onload="onBodyLoad()"><!------------------ Header Begins Begins--------------------->
<form name="journalVoucher" action="../JournalBook.jsp">
<input type="hidden" name="databaseDate"  id="databaseDate">
<input type=hidden id=reportType name=reportType>
<div class="tblHTM-container" id="tbl-container">
	<table width="100%" border=0 cellpadding="3" cellspacing="0" id="mainTable"><!-- row-0 -->
		<tr>
			<td class="rowheader" valign="center" width="100%" colspan="4"><span id="screenName" class="headerwhite2"> Schedule Of</span></td>
		</tr><!-- row-1 -->
		<tr class="row1" >

   		</tr><!-- row-2 -->
		<tr class="row1"  >
			<td><div align="right" valign="center" class="normaltext" >Account Code<span class=leadon>*</span></div></td>
			<td>
				<input type="hidden" name="chartOfAccounts_id" id="chartOfAccounts_id">
				<input class="fieldinput" name="accCode" id="accCode"   exilMustEnter="true"><IMG id=IMG1 onclick="openSearch('chartofaccounts',1);" height=22 src="/egi/resources/erp2/images/plus1.gif" width=25 align=top border=0>
			</td>
			<td><div align="right" valign="center" class="normaltext">Fund<span class=leadon>*</span></div></td>
			<td align="left">
				<SELECT class="fieldinput" id=fund_id name="fund_id" exilListSource="fundNameList" exilMustEnter="true"></SELECT>
			</td>
		</tr><!-- row-3 -->

		<tr class="row1"  >
			<td><div align="right" valign="center" class="normaltext">Starting Date<span class=leadon>*</span></div></td>
			<td align="left">
				<input name="startDate" id="startDate" class="datefieldinput" onkeyup="DateFormat(this,this.value,event,false,'3')" exilDataType="exilAnyDate" exilCalendar="true" exilMustEnter="true">
			</td>
			<td><div align="right" valign="center" class="normaltext" >End Date<span class=leadon>*</span></div></td>
			<td>
				<input name="endDate" id="endDate" class="datefieldinput" onkeyup="DateFormat(this,this.value,event,false,'3')" exilDataType="exilAnyDate" exilCalendar="true" exilMustEnter="true">
			</td>

		</tr>
		<tr class="row2">
			<td colspan=4>
			</td>
		</tr>
		<tr class="row2">
			<td colspan="4" align="middle"><!-- Buttons Start Here -->
				<table border="0" cellpadding="0" cellspacing="0">
					<tr>
						<td align="right">
							<IMG id=IMG1 height=18 src="/egi/resources/erp2/images/Button_leftside.gif" width=7 ></td>
						<td bgcolor="#fe0000" valign="center" nowrap><A class=buttonprimary onclick=ButtonPress() href="#">Search</A></td>
						<td>
							<IMG height=18 src="/egi/resources/erp2/images/Button_rightside.gif" width=7></td>
					</tr>
				</table><!-- Buttons Ends Here -->
			</td>
		</tr>
		<tr class="row2"  >
			<td colspan=4>
				<table width="100%" align=center border="0" cellpadding="0" cellspacing="0" id='hdrRow' name="hdrRow">
					<tr class="row1" height="25">
          <TD width="95%" ?>
            <DIV class=displaydata id=rptHeader align=center

            name="rptHeader">&nbsp;</DIV></TD></tr>
				</table>
			</td>
		</tr><!-- row-14 -->

		<tr class="row2"  >
			<td colspan=4>
				<table width="100%" align=center border="1" cellpadding="0" cellspacing="0" id="gridGLDetail" name="gridGLDetail">
				  <thead>
					<tr class="rowheader">
						<th width="20%" class="columnheader" align="center">Code.</td>
						<th width="20%" class="columnheader" align="center">Name</td>
						<th width="20%" class="columnheader" align="center">Particulars</td>
						<th width="20%" class="columnheader" align="center">Debit</td>
						<th width="20%" class="columnheader" align="center">Credit</td>
						<th width="0%" class="columnheader"  style="display:none"></td>
					</tr>
				   </thead>
					<tr class="row1">
						<td valign="top"><div class="normaltext" name="code" id="code" align="left"></div>&nbsp;</td>
						<td valign="top"><div class="normaltext" name="name" id="name" align="left"></div>&nbsp;</td>
						<td valign="top"><div class="normaltext" name="particulars" id="particulars" align="right"></div>&nbsp;</td>
						<td valign="top"><div class="normaltext" name="balanceDr" id="balanceDr" align="right"></div>&nbsp;</td>
						<td valign="top"><div class="normaltext" name="balanceCr" id="balanceCr" align="right"></div>&nbsp;</td>
						<td valign="top" style="display:none"><div class="normaltext" name="colorFlag" id="colorFlag" style="display:none"></div>&nbsp;</td>
					</tr>
				</table>
			</td>
		</tr>
	</table>
	</div>
</form>
</body>
</html>
