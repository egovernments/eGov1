#-------------------------------------------------------------------------------
# eGov suite of products aim to improve the internal efficiency,transparency, 
#      accountability and the service delivery of the government  organizations.
#   
#       Copyright (C) <2015>  eGovernments Foundation
#   
#       The updated version of eGov suite of products as by eGovernments Foundation 
#       is available at http://www.egovernments.org
#   
#       This program is free software: you can redistribute it and/or modify
#       it under the terms of the GNU General Public License as published by
#       the Free Software Foundation, either version 3 of the License, or
#       any later version.
#   
#       This program is distributed in the hope that it will be useful,
#       but WITHOUT ANY WARRANTY; without even the implied warranty of
#       MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
#       GNU General Public License for more details.
#   
#       You should have received a copy of the GNU General Public License
#       along with this program. If not, see http://www.gnu.org/licenses/ or 
#       http://www.gnu.org/licenses/gpl.html .
#   
#       In addition to the terms of the GPL license to be adhered to in using this
#       program, the following additional terms are to be complied with:
#   
#   	1) All versions of this program, verbatim or modified must carry this 
#   	   Legal Notice.
#   
#   	2) Any misrepresentation of the origin of the material is prohibited. It 
#   	   is required that all modified versions of this material be marked in 
#   	   reasonable ways as different from the original version.
#   
#   	3) This license does not grant any rights to any user of the program 
#   	   with regards to rights under trademark law for use of the trade names 
#   	   or trademarks of eGovernments Foundation.
#   
#     In case of any queries, you can reach eGovernments Foundation at contact@egovernments.org.
#-------------------------------------------------------------------------------
<!doctype html public "-//W3C//DTD HTML 4.0 Transitional//EN">
<html>
	<head>
			<script language="javascript">
			var isDrillDown=false;
			var sameWindow=0;
			var cgn=null;
			var sIndex,sValue,sText;
			var recSelected=false;var dbDate="";
					function clearCombo(cId)
		    {
				var bCtrl=document.getElementById(cId);
				for(var i=bCtrl.options.length-1;i>=0;i--)
				{
					bCtrl.remove(i);
				}
			}
				function hideButtons(){
								document.getElementById('search').style.display="none";
								document.getElementById('submitGridBelow').style.display ="none";

					}
			function addSlNo(){
				var slNo=1;
				var tabObj=document.getElementById("chqDetails");
				for(var i=1;i<tabObj.rows.length;i++){
					var obj=PageManager.DataService.getControlInBranch(tabObj.rows[i],"slNo");
					obj.innerHTML=slNo.toString();
					slNo++;
				}

			}
			function drillIt(){
					var mode="view";
					var cgn1=document.getElementById('getCgno').value
					var cgn2=cgn1.substring(0,3);
					switch(cgn2){
						case 'JVG':
						window.open("JV_General.htm?cgNumber="+cgn1+"&showMode="+mode,"","height=650,width=900,scrollbars=yes,left=30,top=30,status=yes");
						break;
						case 'SJV' :
						window.open("SupplierJournal.htm?cgNumber="+cgn1+"&showMode="+mode,"","height=650,width=900,scrollbars=yes,left=30,top=30,status=yes");
						break;
						case 'CJV' :
						window.open("ContractorJournal.htm?cgNumber="+cgn1+"&showMode="+mode,"","height=650,width=900,scrollbars=yes,left=30,top=30,status=yes");
						break;
						case 'SAL' :
						window.open("JV_Salary.htm?cgNumber="+cgn1+"&showMode="+mode,"","height=650,width=900,scrollbars=yes,left=30,top=30,status=yes");
						break;
						case 'PYS':
						window.open("PayInSlip.htm?cgNumber="+cgn1+"&showMode="+mode,"","height=650,width=900,scrollbars=yes,left=30,top=30,status=yes");
						break;
						case 'BTB':
						window.open("JV_Contra_BToB.htm?cgNumber="+cgn1+"&showMode="+mode,"","height=650,width=900,scrollbars=yes,left=30,top=30,status=yes");
						break;
						case 'BTC':
						window.open("JV_Contra_BToC.htm?cgNumber="+cgn1+"&showMode="+mode,"","height=650,width=900,scrollbars=yes,left=30,top=30,status=yes");
						break;
						case 'CTB':
						window.open("JV_Contra_CToB.htm?cgNumber="+cgn1+"&showMode="+mode,"","height=650,width=900,scrollbars=yes,left=30,top=30,status=yes");
						break;
						case 'FTF':
						window.open("JV_Contra_FToF.htm?cgNumber="+cgn1+"&showMode="+mode,"","height=650,width=900,scrollbars=yes,left=30,top=30,status=yes");
						break;
						case 'DBP':
						window.open("DirectBankPayment.htm?cgNumber="+cgn1+"&showMode=viewBank","","height=650,width=900,scrollbars=yes,left=30,top=30,status=yes");
						break;
						case 'DCP' :
						window.open("DirectCashPayment.htm?cgNumber="+cgn1+"&showMode=viewCash","","height=650,width=900,scrollbars=yes,left=30,top=30,status=yes");
						break;
						case 'SPH':
						window.open("SubLedgerPayment.htm?cgNumber="+cgn1+"&showMode="+mode,"","height=650,width=900,scrollbars=yes,left=30,top=30,status=yes");
						break;
						case 'SSP' :
						window.open("SubledgerSalaryPayment.htm?cgNumber="+cgn1+"&showMode="+mode,"","height=650,width=900,scrollbars=yes,left=30,top=30,status=yes");
						break;
						case 'ASP' :
						window.open("AdvanceJournal.htm?cgNumber="+cgn1+"&showMode="+mode,"","height=650,width=900,scrollbars=yes,left=30,top=30,status=yes");
						break;
						case 'MSR':
						window.open("VMC/miscReceipt_VMC.jsp?cgNumber="+cgn1+"&showMode="+mode,"","height=650,width=900,scrollbars=yes,left=30,top=30,status=yes");
						break;
						case 'PRB' :
						case 'PRO' :
						case 'PRF' :
						window.open("PT_Field.htm?cgNumber="+cgn1+"&showMode="+mode,"","height=650,width=900,scrollbars=yes,left=30,top=30,status=yes");
						break;
						case 'OTF':
						window.open("OT_Field.htm?cgNumber="+cgn1+"&showMode="+mode,"","height=650,width=900,scrollbars=yes,left=30,top=30,status=yes");
						break;
						case 'OTO':
						window.open("OT_Office.htm?cgNumber="+cgn1+"&showMode="+mode,"","height=650,width=900,scrollbars=yes,left=30,top=30,status=yes");
						break;
					}
			}
		  function afterRefreshPage(dc)
		 {
		  		var cgn=PageManager.DataService.getQueryField('cgNumber');
	   		 	var sm=PageManager.DataService.getQueryField('showMode');
		        if(dc.values['serviceID']=='accNumber4PIS' && cgn )
		          accntMod(document.getElementById("accountList"));
		        var cgn=PageManager.DataService.getQueryField('cgNumber');
	   		 	var sm=PageManager.DataService.getQueryField('showMode');
				if("getDetails4PISReverse"==dc.values['serviceID'] && cgn && (sm=='edit'))
				{
				   var vnum=dc.values['chequeDetail_payInSlipNumber'];
				   var subVnum=vnum.substring(0,2);
				   document.getElementById("chequeDetail_payInSlipNumber").value=vnum.substring(2,vnum.length);
		 		   document.getElementById("vnum").value=subVnum;
					if(document.getElementById("oldVoucherDate").value == "")
					 {
					 		document.getElementById("oldVoucherDate").value=formatDate2(dc.values['chequeDetail_payInSlipDate']);
					 }
			  		//alert(document.getElementById("oldVoucherDate").value);
				}

		    var cgn=PageManager.DataService.getQueryField('cgNumber');
		    var sm=PageManager.DataService.getQueryField('showMode');
		 	enableGrid()//Will enable grid rows
		 	if(cgn && (sm=='edit'))
            {
              hideForEditPage();
            }
		 	if(dc.values['databaseDate']!='' && dc.values['serviceID']=='payInSlipData')
			{
			var dt=dc.values['databaseDate']
			document.getElementById('chequeDetail_payInSlipDate').value=dt;

			}

		 	if(dc.values['serviceID']=='getCgn'){
		 					var cNumber=dc.values['getCgno'];
		 					document.getElementById('getCgno').value=cNumber;
		 					drillIt();
		 					return;
		 			}
				var chequeDetail_payInSlipDate=dc.values['chequeDetail_payInSlipDate'];
				if(chequeDetail_payInSlipDate){
					voucherDate=formatDate2(chequeDetail_payInSlipDate);
					document.getElementById('chequeDetail_payInSlipDate').value=voucherDate;
				}
				var bId=dc.values['bank_id'];
				if(bId){
					var index=bId.indexOf("-");
					brId=bId.substring(index+1,bId.length);
					var accObj=document.getElementById('accountList');
					accObj.setAttribute("exilListSource","accountList");
					PageManager.DataService.setQueryField('branchId',brId);
		 			PageManager.DataService.callDataService('accNumber4PIS');
				}
				var chq=dc.values['org_chequeInHandId'];
				if(chq){
					document.getElementById('organizationStructure_chequeInHandId').value=chq;
				}

				if(window.hasQueryString)
				{
					if(PageManager.DataService.getQueryField("branchId")!=null)
					 {
						fillBankDetails();
					 }

				}
				else if(window.branchChange)
				{
						window.branchChange=false;
						selectAccNo();
				}
				if(dc.values['serviceID']=='payChequeDetails' || dc.values['serviceID']=='getDetails4PISReverse')	addSlNo();
                if(dc.values['serviceID']=='getDetails4PISReverse'){
                   calcTotal();
                }

				/*var chqGrid=dc.grids['chqDetails'];
				if(chqGrid!=null){
					var tabObj=dc.grids['chqDetails'];
					for(var i=1;i<tabObj.length;i++){
						if(tabObj.length == 2){
							document.journalVoucher.chequeNumber.value = tabObj[i][1];
							document.journalVoucher.chequeDate.value = tabObj[i][2];
						}else{
							document.journalVoucher.chequeNumber[i-1].value = tabObj[i][1];
							document.journalVoucher.chequeDate[i-1].value = tabObj[i][2];
						}
					}
			   }*/
			if(dc.values['serviceID']=='payInSlip'){
			var chqDetObj=document.getElementById("chqDetails");
			chqDetObj.style.display="block";
			}
		 }
		 function beforeRefreshPage(dc)
		 {
			    var countboundary=dc.values['noOfBoundaryLevels'];
				if(countboundary==1){
					var boundaryLevelId=dc.values['boundaryLevelId'];
					var boundaryTypeId=dc.values['boundaryTypeId'];
					//alert("1blevel "+boundaryLevelId+" btype"+boundaryTypeId);
					PageManager.DataService.setQueryField('boundaryLevelId',boundaryLevelId);
					PageManager.DataService.setQueryField('boundaryTypeId',boundaryTypeId);
					PageManager.DataService.callDataService('DefaultChequeValuePIS');
				}
				if(dc.values['serviceID']=='DefaultChequeValuePIS'){
				document.getElementById('organizationStructure_chequeInHandId').value=dc.values['chequeinhand'];
				document.getElementById('organizationStructure_chequeInHandName').value=dc.values['chequeInHandName'];}
			 if(dc.values['glCodeName'])
		 		{
		 		  glNameCode=dc.values['glCodeName'];
		 		 showEntry();
				}

		 	if(dc.values['serviceID']=='payChequeDetails')
		 	{
		 		var chqGrid=dc.grids['chqDetails'];
		 		if(chqGrid==null || chqGrid.length<=1)
		 		{
		 		  alert("No Records Found");
				 // document.getElementById('modGrid').style.display="none";
				  document.getElementById('submitGrid').style.display="none";
				  document.getElementById('backbutton').style.display="none";

		 		}

		 	}

     		//if(isNaN(parseInt(dc.values['voucherHeader_cgn'])) && dc.values['serviceID']!='getPayInSlipDetails') return;
     		if(cgn && dc.values['serviceID']!='getDetails4PISReverse') return;
     		if(!isNaN(parseInt(dc.values['voucherHeader_cgn'])))
			{
				dc.values['voucherHeader_cgn']='PYS'+dc.values['voucherHeader_cgn'];
			}
			if(dc.values['serviceID']!='getCgn'){
								var chqGrid=dc.grids['chqDetails'];
								var display=true;
								try{
									if(chqGrid==null || chqGrid.length<=1)
									display=false;
								}
								catch(e)
								{display=false;}
								if(display)
								{
								 var chqAmtObj=document.getElementById("chqAmount");
								 chqAmtObj.style.display="block";
								}
								else
								{
								 var chqDetObj=document.getElementById("chqDetails");
								 chqDetObj.style.display="none";
								}
								var chqGrid=dc.grids['chqDetails'];
								if(chqGrid!=null){
									var tabObj=dc.grids['chqDetails'];
									for(var i=1;i<tabObj.length;i++){
										dc.grids['chqDetails'][i][4]=formatDate(dc.grids['chqDetails'][i][4]);
										dc.grids['chqDetails'][i][6]=formatDate(dc.grids['chqDetails'][i][6]);
										dc.grids['chqDetails'][i][5]=formatDate(dc.grids['chqDetails'][i][5]);

									}
								}
			}
		 }
		 function afterUpdateService(dc)
		 {
			if(sameWindow == 1){
	               window.location="PayInSlip.htm";
	               }else{
	               window.close();
	                }
	          sameWindow=0;
	         return true;
		 }

			function hideCell(colIndex,tableId)
			{
			    var tblObj = document.getElementById(tableId);
				var rows = tblObj.rows;
				for(i=0;i<rows.length;i++)
				{
					var cols = rows[i].cells;
					cols[colIndex].style.display='none';
				}
			}
		 function fillBankDetails()
		 {
			window.hasQueryString=false;
			var brId=PageManager.DataService.getQueryField("branchId");
			selectBank(brId);
			bankChange(brId);
			window.branchChange=true;

		 }
		 function selectBank(brId)
		 {
			var bankObj=document.getElementById("bank_id");
			for(var i=0;i<bankObj.options.length;i++)
			{
				var text=bankObj.options[i].value;
				var index=text.indexOf("-");
				var internalBrId=text.substring(index+1,text.length);
				if(parseInt(internalBrId)==parseInt(brId))
				{
					bankObj.options[i].setAttribute("selected",true);
					break;
				}
			}
		 }
		 function selectAccNo()
		 {
		   try{
			var accNo=PageManager.DataService.getQueryField("accNo");
			var accObj=document.getElementById("accountList");
			for(var i=0;i<accObj.options.length;i++)
			{
				if(accObj.options[i].value.toLowerCase()==accNo.toLowerCase())
				{
					accObj.options[i].setAttribute("selected",true);
					break;
				}
			}
			}catch(e){}
		 }

		 function onSearch()
		 {


		 		dbDate=document.getElementById('databaseDate').value;
				var vhDate=document.getElementById('chequeDetail_payInSlipDate').value;
				if(compareDate(formatDateToDDMMYYYY1(vhDate),formatDateToDDMMYYYY1(dbDate)) == -1 )
				{
				alert('Voucher Date should be less than or equal to '+dbDate);
				document.getElementById('chequeDetail_payInSlipDate').focus();
				return false;
				}
		  var bCtrl=document.getElementById('bank_id');
				if(bCtrl.selectedIndex==-1)
				{
					alert("Select bank");
					return;
				}
			var ano=document.getElementById('accountList');
			if(ano.selectedIndex==-1)
			{
					alert("Select Account Number");
								return;
			}
			/*var text=bCtrl.options[bCtrl.selectedIndex].value;
			var index=text.indexOf("-");
			var brnId=text.substring(index+1,text.length);
			PageManager.DataService.setQueryField('bAccount_branchId',brnId);
			var anumValue=ano.options[ano.selectedIndex].value;
			PageManager.DataService.setQueryField('bankAccID',anumValue);*/
			var obj=document.getElementById('fundSource_id');
			if(obj.selectedIndex != -1)
				var fSourceId=obj.options[obj.selectedIndex].value;
			var obj=document.getElementById('scheme');
			if(obj.selectedIndex != -1)
				var schemeId=obj.options[obj.selectedIndex].value;

			var fundId=document.getElementById('Fund_id').value;
			PageManager.DataService.setQueryField('fund_Id',fundId);
			PageManager.DataService.setQueryField('fSource_Id',fSourceId);
			PageManager.DataService.setQueryField('scheme_Id',schemeId);
			PageManager.DataService.callDataService('payChequeDetails');
			document.getElementById('search').style.display="block";
			var chqDetObj=document.getElementById("chqDetails");
			 chqDetObj.style.display="block";
			document.getElementById('submitGrid').style.display="block";
			PageManager.DataService.removeQueryField('fund_Id',fundId);

		  }
		function accountChange()
		   {
				var ano=document.getElementById('accountList');
				if(ano.selectedIndex==-1)return;
				var anoValue=ano.options[ano.selectedIndex].value;
				PageManager.DataService.setQueryField('bankAccountID',anoValue);
				var Obj=document.getElementById('fundSource_id');
				 Obj.setAttribute('exilListSource',"fundSource");
				PageManager.DataService.callDataService('getFundForBranch');
				//PageManager.DataService.callDataService('accNumber');
				document.getElementById('submitGrid').style.display ="none";
				document.getElementById('Fund_id').value='';
				document.getElementById('chqAmount').style.display ="none";
				document.getElementById('search').style.display="block";
		 }

		function loadBanknfsource()
		    {
		    	//alert(hello!);
		        var fund=document.getElementById('fund_name');
		       	var fundSourceObj= document.getElementById('fundSource_id');
		       	if(fundSourceObj.options.length>0)
		       	{
					for(var i=0; i<fundSourceObj.options.length; i++){
					fundSourceObj.options[i].text="";
					}
				}
		        if(fund.selectedIndex!=-1)
				 {
				    var fundValue=fund.options[fund.selectedIndex].value;
	 				var obj1=document.getElementById('fundSource_id');
	 				obj1.setAttribute('exilListSource',"fundSource1");
	 				PageManager.DataService.setQueryField('Fund_id',fundValue);
	 				var obj2=document.getElementById('bank_id');
	 				obj2.setAttribute('exilListSource',"BanksList1");
	 				PageManager.DataService.setQueryField('Fund_id',fundValue);
				    PageManager.DataService.callDataService('getBanknFundsource4PIS');

				document.getElementById('submitGrid').style.display ="none";
				//document.getElementById('Fund_id').value='';
				document.getElementById('chqAmount').style.display ="none";
				document.getElementById('search').style.display="block";
				}

		}

		 function bankChange(brId)
		 {
			sIndex=null;
			document.getElementById("acc_Desc").value="";
		    //var fund1 = document.getElementById('fund_name');
		     //   if(fund1.options[fund1.selectedIndex].value == null)
		      //     {alert("Please select Fund and Fundsource first!");}
			//select accountnumber from bankaccount where branchid=id
			if(brId==null)
			{
				var bCtrl=document.getElementById('bank_id');
				if(bCtrl.selectedIndex==-1)return;
				var text=bCtrl.options[bCtrl.selectedIndex].value;
				var index=text.indexOf("-");
				brId=text.substring(index+1,text.length);
			}
			clearCombo("accountList");
			var accObj=document.getElementById('accountList');
			accObj.setAttribute("exilListSource","accountList");
			//PageManager.DataService.setQueryField('bankAccount_branchId',brId);
			PageManager.DataService.setQueryField('branchId',brId);
		 	//PageManager.DataService.callDataService('accountNumber');
		 	PageManager.DataService.callDataService('accNumber4PIS');
		 	document.getElementById('submitGrid').style.display ="none";
		 	document.getElementById('Fund_id').value='';
		 	document.getElementById('chqAmount').style.display ="none";
		 	document.getElementById('search').style.display="block";

		 }
		 function submitAndNew(){
                  sameWindow=1;
                  ButtonPress("submit");
                }

function getDetails(obj){

	var row=PageManager.DataService.getRow(obj);
	var table=document.getElementById('chqDetails');
	var vouNum=PageManager.DataService.getControlInBranch(table.rows[row.rowIndex],"vNumber");
	vouNum=vouNum.innerHTML;
	var vouDate=PageManager.DataService.getControlInBranch(table.rows[row.rowIndex],"chequeDetail_receiptDate");
	vouDate=vouDate.innerHTML;

	PageManager.DataService.setQueryField('vouNumber',vouNum);
	PageManager.DataService.setQueryField('vouDate',vouDate);
	PageManager.DataService.callDataService('getCgn');

}
function allFormvalidated()
{
	if(document.getElementById('Fund_id').value.length==0 ||	document.getElementById('bank_id').value.length==0  || document.getElementById('chequeDetail_payInSlipNumber').value.length==0  ||document.getElementById('accountList').value.length==0  ||document.getElementById('chequeDetail_payInSlipDate').value.length==0)
	{
		alert("Enter all the mandatory fields.");
		enableGrid()//Will enable grid rows
		return false;
	}
	else
		return true;
}
 function insert()
		{
		   var cgn=PageManager.DataService.getQueryField('cgNumber');
		   var sm=PageManager.DataService.getQueryField('showMode');
		    if(cgn)
		    {
				disableControls(0,false);
	        }
				else
				{
		 	   	   if(allFormvalidated())
		 	   		{
		 				if(checkNarration('voucherDetail_narration')==0)return;
		 				var chqDetObj=document.getElementById("chqDetails");
						var finalAmount=0;
						var chqAmountObj=document.getElementById("fAmount");
						finalAmount=parseInt(chqAmountObj.value,10);
						//if(chqDetObj.rows.length<=1 || finalAmount<=0 || isNaN(finalAmount)){
						if(chqDetObj.rows.length<=1 && !ifSelected){
							alert("No records to submit");
						return;
					}
					if(!isValidDate()) return false;
				}
			   }
		   PageManager.UpdateService.submitForm('payInSlip');
		   enableGrid()//Will enable grid rows
		   if(sm=='edit')
			 hideForEditPage();
		 }


		 function isValidDate(){
			var payInSlipDate = document.journalVoucher.chequeDetail_payInSlipDate.value;
			var reciptDate, table = document.getElementById("chqDetails");

			payInSlipDate = formatDateToDDMMYYYY4(payInSlipDate);
			for(var i=1; i<table.rows.length; i++){
				chkBox = PageManager.DataService.getControlInBranch(table.rows[i],'selectChq');
				if(chkBox.checked){
					reciptDate = PageManager.DataService.getControlInBranch(table.rows[i],'chequeDetail_receiptDate').innerHTML;
					reciptDate = formatDateToDDMMYYYY4(reciptDate);
					if(compareDate(reciptDate, payInSlipDate) == -1){
						alert('reciptDate can not be less than payInSlipDate, check ' + i + ' th row'+reciptDate +'    '+payInSlipDate);
						enableGrid()//Will enable grid rows
						return false;
					}
				}
			}
			return true;
		 }

//Function to enable the grids that are disabled during submission
		 function enableGrid()
		 {
		 	var table=document.getElementById('chqDetails');
		 	var disGrid;
		 	for(var i=1;i<table.rows.length;i++)
		 	{
		 	     disGrid=PageManager.DataService.getControlInBranch(table.rows[i]);
		 		 disGrid.disabled=false;
		 	}
		 }

//Disable grid items(cheques not to be deposited) that are not selected for updation
function disableGrid()
{
	var table=document.getElementById('chqDetails');
	var disGrid;
	for(var i=1;i<table.rows.length;i++)
	{
	chkBox=PageManager.DataService.getControlInBranch(table.rows[i],"selectChq");
	disGrid=PageManager.DataService.getControlInBranch(table.rows[i]);
	if(chkBox.checked)
	{
		disGrid.disabled=false;
	}
	else
	 disGrid.disabled=true;

	}
}

function ifSelected()
{
	var table=document.getElementById('chqDetails');
			for(var i=1;i<table.rows.length;i++)
			{
			chkBox=PageManager.DataService.getControlInBranch(table.rows[i],"selectChq");
			if(chkBox.checked)
				recSelected=true;
			if(recSelected)
				break;
			}
}
	/*	 function calcTotal()
		 {
		    var chkBox;
			var tAmountObj;
			var tAmount=0,temp;
			var table=document.getElementById('chqDetails');
			for(var i=1;i<table.rows.length;i++)
			{
				chkBox=PageManager.DataService.getControlInBranch(table.rows[i],"selectChq");
				tIdObj=PageManager.DataService.getControlInBranch(table.rows[i],"chequeDetail_Id");
				tNumObj=PageManager.DataService.getControlInBranch(table.rows[i],"chequeNumber");
				tDateObj=PageManager.DataService.getControlInBranch(table.rows[i],"chequeDate");
				tAmtObj=PageManager.DataService.getControlInBranch(table.rows[i],"chequeDetail_amount");
				if(chkBox.checked)
				{
					tAmountObj=PageManager.DataService.getControlInBranch(table.rows[i],"chequeDetail_amount");
					tIdObj.disabled=false;
					tNumObj.disabled=false;
					tDateObj.disabled=false;
					tAmtObj.disabled=false;
					//temp=parseFloat(tAmountObj.innerHTML);
					temp=parseFloat(tAmountObj.value);
					if(!isNaN(temp)) tAmount+=temp;
				}
				else
				{
					tAmountObj=PageManager.DataService.getControlInBranch(table.rows[i],"chequeDetail_amount");
					tIdObj.disabled=true;
					tNumObj.disabled=true;
					tDateObj.disabled=true;
					tAmtObj.disabled=true;
				}
			}
			tAmountObj=document.getElementById('famount');
			//if(!isNaN(tAmount)) tAmountObj.innerHTML=tAmount;
			if(!isNaN(tAmount)) tAmountObj.value=tAmount;
		 }*/

		 function calcTotal()
		 {

		 		   var chkBox;
		 			var tAmountObj;
		 			var tAmount=0,temp;
		 			var table=document.getElementById('chqDetails');
		 			for(var i=1;i<table.rows.length;i++)
		 			{
		 				chkBox=PageManager.DataService.getControlInBranch(table.rows[i],"selectChq");
		 				//tIdObj=PageManager.DataService.getControlInBranch(table.rows[i],"chequeDetail_Id");
		 				//tNumObj=PageManager.DataService.getControlInBranch(table.rows[i],"chequeNumber");
		 				//tDateObj=PageManager.DataService.getControlInBranch(table.rows[i],"chequeDate");
		 				tAmtObj=PageManager.DataService.getControlInBranch(table.rows[i],"chequeDetail_amount");
		 				if(chkBox.checked)
		 				{
		 					tAmountObj=PageManager.DataService.getControlInBranch(table.rows[i],"chequeDetail_amount");
		 					//tIdObj.disabled=false;
		 					//tNumObj.disabled=false;
		 					//tDateObj.disabled=false;
		 					//tAmtObj.disabled=false;
		 					//temp=parseFloat(tAmountObj.innerHTML);
		 					temp=parseFloat(tAmountObj.value);
		 					if(!isNaN(temp)) tAmount+=temp;
		 				}
		 			/*	else
		 				{
		 					tAmountObj=PageManager.DataService.getControlInBranch(table.rows[i],"chequeDetail_amount");
		 					tIdObj.disabled=true;
		 					tNumObj.disabled=true;
		 					tDateObj.disabled=true;
		 					tAmtObj.disabled=true;
		 				}
		 				*/
		 			}
		 			tAmountObj=document.getElementById('famount');
		 			//if(!isNaN(tAmount)) tAmountObj.innerHTML=tAmount;
		 			if(!isNaN(tAmount)) tAmountObj.value=tAmount;
		 			//alert("tAmount--"+tAmount+"tAmountObj.value--"+tAmountObj.value);
		 }


		 function selUnSelAll()
		 {
			var table=document.getElementById('chqDetails');
			var chkBox,hchkBox;
			for(var i=1;i<table.rows.length;i++)
			{
				hchkBox=PageManager.DataService.getControlInBranch(table.rows[0],"selectChq");
				chkBox=PageManager.DataService.getControlInBranch(table.rows[i],"selectChq");
				if(hchkBox.checked)
				  chkBox.checked=true;
				else
				 chkBox.checked=false;

			}
			ifSelected();
			//calcTotal();
		 }
		 function onloadTasks()
		 {

			var vcNo=document.getElementById("chequeDetail_payInSlipNumber");
			vcNo.focus();
			window.gridReArranged=false;
		    window.hasQueryString=false;


		    PageManager.ListService.callListService();
		    var userId=CookieManager.getCookie("currentUserId");
			PageManager.DataService.setQueryField('userId',userId);
			cgn=PageManager.DataService.getQueryField('cgNumber');
			 var sm=PageManager.DataService.getQueryField('showMode');
			  var status=PageManager.DataService.getQueryField('vStatus');
		    if(cgn && (sm=="view")){
				isDrillDown=true;
				var accObj=document.getElementById('accountList');
			    accObj.setAttribute("exilListSource","accountList");
			    PageManager.DataService.setQueryField('cgNumber',cgn);
			  if(status==2){
			    	PageManager.DataService.callDataService('getReversedPayInSlipDetails');

			    }
			    else {

		 	    var obj1=document.getElementById('fundSource_id');
	 				obj1.setAttribute('exilListSource',"fundSource1");
	 			var obj2=document.getElementById('bank_id');
	 				obj2.setAttribute('exilListSource',"BanksList1");
	 				//PageManager.DataService.setQueryField('fundValue',fundValue);

	 			var accObj=document.getElementById('accountList');
			       accObj.setAttribute("exilListSource","accountList");
			        //PageManager.DataService.setQueryField('branchId',brId);
			    // PageManager.DataService.callDataService('accNumber4PIS');
			     PageManager.DataService.callDataService('getDetails4PISReverse');
				//PageManager.DataService.callDataService('getPayInSlipDetails');
				}
				hideButtons();
				disableControls(0,true);
				PageManager.DataService.setQueryField('egUser',userId);
		 		PageManager.DataService.callDataService('getchqId');
		 		document.getElementById('chequeDetail_payInSlipNumber').setAttribute('exilDataType','exilAlphaNumeric');
		 		document.getElementById('cgnLabel').style.display='block';
		 		document.getElementById('cgnText').style.display='block';
		 		document.getElementById('submitGrid').style.display="none";
		 		document.getElementById('submitGridBelow').style.display="none";
		 		document.getElementById('reverseGrid').style.display="none";
		 		var chqAmtObj=document.getElementById("chqAmount");
				chqAmtObj.style.display="block";
				 document.getElementById('backbutton').style.display="block";

		 	 }

		 	 if(cgn && (sm=="modify")){
				isDrillDown=true;
				var accObj=document.getElementById('accountList');
			    accObj.setAttribute("exilListSource","accountList");
			    PageManager.DataService.setQueryField('cgNumber',cgn);
			   if(status==2){
			    	PageManager.DataService.callDataService('getReversedPayInSlipDetails');

			    }
			    else {

		 	    var obj1=document.getElementById('fundSource_id');
	 				obj1.setAttribute('exilListSource',"fundSource1");
	 			var obj2=document.getElementById('bank_id');
	 				obj2.setAttribute('exilListSource',"BanksList1");
	 				//PageManager.DataService.setQueryField('fundValue',fundValue);

	 			var accObj=document.getElementById('accountList');
			       accObj.setAttribute("exilListSource","accountList");
			        //PageManager.DataService.setQueryField('branchId',brId);
			    // PageManager.DataService.callDataService('accNumber4PIS');
			     PageManager.DataService.callDataService('getDetails4PISReverse');
				//PageManager.DataService.callDataService('getPayInSlipDetails');
				}
				hideButtons();
				disableControls(0,true);
				PageManager.DataService.setQueryField('egUser',userId);
		 		PageManager.DataService.callDataService('getchqId');
		 		document.getElementById('chequeDetail_payInSlipNumber').setAttribute('exilDataType','exilAlphaNumeric');
		 		document.getElementById('cgnLabel').style.display='block';
		 		document.getElementById('cgnText').style.display='block';
		 		document.getElementById('submitGrid').style.display="none";
		 		var chqAmtObj=document.getElementById("chqAmount");
				chqAmtObj.style.display="block";
				 document.getElementById('backbutton').style.display="none";
		 	 }
		 	// Included by --------Lakshmi ---------
		 	if (cgn && (sm=="edit"))
		 	{
			    PageManager.DataService.callDataService('payInSlipData');
			    document.getElementById('fundSource_id').setAttribute('exilListSource',"fundSource1");
	 			document.getElementById('bank_id').setAttribute('exilListSource',"BanksList1");
	 			document.getElementById('accountList').setAttribute("exilListSource","accountList");
			    PageManager.DataService.callDataService('getDetails4PISReverse');
			    PageManager.DataService.setQueryField('egUser',userId);
			    //PageManager.DataService.callDataService('getchqId');
		 		document.getElementById('modeOfExec').value="edit";

			//------  GUI Configuration  ------
				PageManager.DataService.setQueryField('egUser',userId);
		 		//PageManager.DataService.callDataService('getchqId');
		 		hideForEditPage();
			}
		 	if(!cgn){
		 	    PageManager.DataService.callDataService('payInSlipData');
			   if(window.location.search.indexOf("?")>=0)
					window.hasQueryString=true;
				//insertDates('chequeDetail_payInSlipDate');
				hideCell(2,'chqDetails');
				hideCell(2,'chqAmount');
			   document.getElementById('submitGrid').style.display="none";
			    document.getElementById('backbutton').style.display="none";
			    document.getElementById('submitGridBelow').style.display="none";
			    document.getElementById('reverseGrid').style.display="none";

		  }

		 }
		 function hideForEditPage()
		 {
		 		document.getElementById('chequeDetail_payInSlipNumber').setAttribute('exilDataType','exilAlphaNumeric');
		 		document.getElementById('fund_name').disabled=true;
		 		document.getElementById('fundSource_id').disabled=true;
		 		//document.getElementById('chequeDetail_payInSlipNumber').disabled=true;
		 		document.getElementById("vnum").style.display="block";
		 		document.getElementById('cgnLabel').style.display='block';
		 		document.getElementById('cgnText').style.display='block';
		 		document.getElementById('search').style.display="none";
		 		document.getElementById("chqAmount").style.display="block";
				document.getElementById('backbutton').style.display="none";
				document.getElementById('submitGrid').style.display="none";
				document.getElementById('reverseGrid').style.display="none";
				document.getElementById('saveandnewBelow').style.display="none";

		 }
		 function disableControls(frmIndex, isDisable){
			for(var i=0;i<document.forms[frmIndex].length;i++)
			{
				document.forms[frmIndex].elements[i].disabled =isDisable;
				if(PageManager.DataService.getQueryField('showMode')=='view' && 
					document.forms[frmIndex].elements[i].parentNode.parentNode.getAttribute('id')=='backbutton')
					document.forms[frmIndex].elements[i].disabled =false;
				if(PageManager.DataService.getQueryField('showMode')=='modify' 
						&& (document.forms[frmIndex].elements[i].parentNode.parentNode.getAttribute('id')=='reverseSubmit' ||
						 document.forms[frmIndex].elements[i].parentNode.parentNode.getAttribute('id')=='reverseGrid' ))
					document.forms[frmIndex].elements[i].disabled =false;
			}
		}

		function submitAndNew(){
		  sameWindow=1;
          insert();
          }

       function pressButton(name)
       {
       		disableGrid();//To send to dc object only checked values
	   		calcTotal();
	          if(name.toLowerCase()=='savennew')
	   			  {
	   			   submitAndNew();
	   			  }
	   			if(name.toLowerCase()=='savenclose')
	   			  {
	   			    insert();
	   			  }
	             var cgn=PageManager.DataService.getQueryField('cgNumber');
	   		              if(cgn){
	   		  			  if(name.toLowerCase()=='reverse'){
	   		  			   var vDate=document.getElementById('chequeDetail_payInSlipDate').value;
	   		  			   var vdObj=document.getElementById('voucherHeader_effDate').value;


	   		  				 if( compareDate(formatDateToDDMMYYYY1(vDate),formatDateToDDMMYYYY1(vdObj)) == -1 ){
	   		  					alert("Reversal date cannot be less than original Voucher date!");
	   		  					document.getElementById('voucherHeader_effDate').focus();
	   		  					}
	   		  				else{
	   		  				document.getElementById('modeOfExec').disabled=false;
	   		  				document.getElementById('voucherHeader_cgn').disabled=false;
	   		  				document.getElementById('chequeDetail_payInSlipNumber').setAttribute('exilDataType','exilAlphaNumeric');

	   		  				document.getElementById('tType').disabled=false;
	   		  				//document.getElementById('cvType').disabled=false;
	   		  				disableControls(0,false);
	   		  				PageManager.UpdateService.submitForm('payInSlip');
	   		  			}
	   		  		   }

	   		   }
	}
		function reverse()
		{
		var cgn=PageManager.DataService.getQueryField('cgNumber');
		   if(cgn){
			document.getElementById('reverseRecord').style.display='block';
			var vcObj=document.getElementById('voucherHeader_newVcNo');
			vcObj.setAttribute('exilMustEnter','true');
			vcObj.disabled=false;
			var vdObj=document.getElementById('voucherHeader_effDate')
			vdObj.setAttribute('exilMustEnter','true');
			vdObj.disabled=false;
			var bcObj=document.getElementById('diffDebit')
			bcObj.disabled=false;
			document.getElementById('modeOfExec').value="modify";
			document.getElementById('submitGrid').style.display ="none";
			document.getElementById('reverseSubmit').style.display ="block";
		}
		}
	function showglEntry()
		{
			hideColumn(0);
			if(!PageValidator.validateForm())
				return false;
			PageManager.DataService.setQueryField("showGlEntries","show");
			var accNumberObj=document.getElementById("accountList");
			var accNumberType=accNumberObj.options[accNumberObj.selectedIndex].value
			PageManager.DataService.setQueryField("accountNumberId",accNumberType);
			PageManager.DataService.callDataService('payInSlip');
		}
		function showEntry()
		{
			calcTotal();
			var trObj;
			var tObj=document.getElementById("showEntries");
			var cr=0,dr=0;
			tObj.style.display="block";
			var tableObj=document.getElementById("entries");
			for(var i=tableObj.rows.length-1;i>=2;i--)
			{
				tableObj.deleteRow(i);
			}
			var Obj=PageManager.DataService.getControlInBranch(tableObj.rows[1],"display_Code");
			trObj=PageManager.DataService.getRow(Obj);
			var iRow=glNameCode.split(";");
			var rowContents=null;tempObj=null;
			for(var i=1;i<(iRow.length)-1;i++)
			{
				rowContents=iRow[i].split("^");
				if(i==1){
				newRow=trObj;
				tempObj1=PageManager.DataService.getControlInBranch(newRow,'display_CodeType');
				tempObj1.innerHTML=rowContents[0];
				tempObj2=PageManager.DataService.getControlInBranch(newRow,'display_Code');
				tempObj2.innerHTML=rowContents[1];
				tempObj3=PageManager.DataService.getControlInBranch(newRow,'display_Head');
				tempObj3.innerHTML=rowContents[2];
				tempObj5=PageManager.DataService.getControlInBranch(newRow,'display_Narration');
				tempObj5.innerHTML=" -";
				}else{
				var newRow=trObj.cloneNode(true);
				newRow=tableObj.tBodies[0].appendChild(newRow);
				tempObj1=PageManager.DataService.getControlInBranch(newRow,'display_CodeType');
				tempObj1.innerHTML=rowContents[0];
				tempObj2=PageManager.DataService.getControlInBranch(newRow,'display_Code');
				tempObj2.innerHTML=rowContents[1];
				tempObj3=PageManager.DataService.getControlInBranch(newRow,'display_Head');
				tempObj3.innerHTML=rowContents[2];
				tempObj5=PageManager.DataService.getControlInBranch(newRow,'display_Narration');
				tempObj5.innerHTML=" -";
				}

			}
			var tAmount=document.getElementById("fAmount");
			var totalamount=parseInt(tAmount.value,10);


			for(var i=1;i<tableObj.rows.length;i++)
			{
				var typeObj=PageManager.DataService.getControlInBranch(tableObj.rows[i],"display_CodeType");
				var type=typeObj.innerHTML;
				if(type =='debit')
				{
					var trObj=PageManager.DataService.getRow(typeObj);
					col1=PageManager.DataService.getControlInBranch(trObj,'display_Credit');
					col1.innerHTML="0";
					col2=PageManager.DataService.getControlInBranch(trObj,'display_Debit');
					col2.innerHTML=totalamount;
				}

			}

			var code= document.getElementById("organizationStructure_chequeInHandId").value;
			var name=document.getElementById("organizationStructure_chequeInHandName").value;
			var newRow=trObj.cloneNode(true);
			newRow=tableObj.tBodies[0].appendChild(newRow);
			tempObj1=PageManager.DataService.getControlInBranch(newRow,'display_Code');
			tempObj1.innerHTML=code;
			tempObj2=PageManager.DataService.getControlInBranch(newRow,'display_Head');
			tempObj2.innerHTML=name;
			tempObj3=PageManager.DataService.getControlInBranch(newRow,'display_Credit');
			tempObj3.innerHTML=totalamount;
			tempObj4=PageManager.DataService.getControlInBranch(newRow,'display_Debit');
			tempObj4.innerHTML="0";
			tempObj5=PageManager.DataService.getControlInBranch(newRow,'display_Narration');
			tempObj5.innerHTML=" -";


			 var dSum=0;
			 var cSum=0;
			for(var i=1;i<tableObj.rows.length;i++)
			{

			  var dObj=PageManager.DataService.getControlInBranch(tableObj.rows[i],"display_Debit");
			  var cObj=PageManager.DataService.getControlInBranch(tableObj.rows[i],"display_Credit");
			 if(!isNaN(parseFloat(dObj.innerHTML)))
			 {
			   var sum=(parseFloat(dObj.innerHTML));
			   dSum=dSum+sum;
			 }
			 if(!isNaN(parseFloat(cObj.innerHTML)))
			 {
			   var sum=(parseFloat(cObj.innerHTML));
			   cSum=cSum+sum;
			 }
			}
			var newRow=trObj.cloneNode(true);
			newRow=tableObj.tBodies[0].appendChild(newRow);
			objt1=PageManager.DataService.getControlInBranch(newRow,'display_Code');
			objt2=PageManager.DataService.getControlInBranch(newRow,'display_Head');
			objt3=PageManager.DataService.getControlInBranch(newRow,'display_Debit');
			objt4=PageManager.DataService.getControlInBranch(newRow,'display_Credit');
			objt5=PageManager.DataService.getControlInBranch(newRow,'display_Narration');
			objt1.innerHTML=" ";
			objt2.innerHTML=" ";
			objt3.innerHTML=dSum;
			objt4.innerHTML=cSum;
			objt5.innerHTML=" ";

			var chqDetObj=document.getElementById("chqDetails");
			chqDetObj.style.display="none";

	}

	function hideColumn(index)
	{
		var table=document.getElementById('entries');
	   	for(var i=0;i<table.rows.length;i++){
			table.rows[i].cells[index].style.display="none";
	   	}
	}

	function ButtonPressed()
	{
	    var test=0;
		var obj=document.getElementById('chqDetails');
		for(var i=1;i<obj.rows.length;i++)
		{
		   var chekValue=PageManager.DataService.getControlInBranch(obj.rows[i],"selectChq");
		   if(chekValue.checked)
		   {
		   	test=1;
		   	break;
		   }
		}
		if(test==0)
		 alert("Please Select atleast one cheque detail");
		else
		 pressButton('savenclose');
	}
		function accntMod(obj)
		{
			if(obj.selectedIndex==-1)	 return;
			 if(sIndex!=null)
			{
					obj.options[sIndex]= new Option(sText,sValue);
			}

			var text=obj.options[obj.selectedIndex].innerHTML;
		    var temp=text.split(" -- ");
			sIndex=obj.selectedIndex;
			sValue=obj.options[obj.selectedIndex].value;
			sText=text;
			if(!temp[1])
				 temp[1]=" ";
			document.getElementById("acc_Desc").value=temp[1];
			try{
				if(temp[1]!=null && temp[1]!="" )
			   {
			     obj.options[obj.selectedIndex].text=temp[0];
			   }
			}catch(err){}
		}
function onClickCancel()
{
	window.location = "PayInSlip.htm"
}
function checkfund()
{
	var tempfund=document.getElementById("fund_name").value;
	if(tempfund=="")
	alert("Select Fund First");
}
function getschemelist(obj)
	{
		var opt=obj.value;
		var obj=document.getElementById('scheme');
		clearCombo('scheme');
		obj.removeAttribute('exilListSource');
		obj.setAttribute('exilListSource','schemelist');
		PageManager.DataService.removeQueryField("scheme");
		PageManager.DataService.removeQueryField("schemeId");
		PageManager.DataService.setQueryField("fundId",opt);
		PageManager.DataService.callDataService("schemelist");
	}

 </script>


	</head>
	  <body bgcolor="#ffffff" bottommargin="0" topmargin="0" rightmargin="0" leftmargin="0"
		 marginheight="0" marginwidth="0" onLoad="onloadTasks();PageValidator.addCalendars();" onKeyDown ="CloseWindow(event); "><!------------------ Header Begins Begins--------------------->
		<form name="journalVoucher">
		<input type="hidden" name="oldVoucherDate" id="oldVoucherDate">
		<input type=hidden id="modeOfExec" name="modeOfExec" value="new">
		<input type=hidden id="getCgno" name="getCgno">
		<input type="hidden" name="tType" id="tType" value="C">
		<input type="hidden" name="cgnNum" id="cgnNum">
		<input type="hidden" name="databaseDate"  id="databaseDate">
		<input type="hidden" name="voucherHeader_id" id="voucherHeader_id">

			<table width="100%" border="0" cellpadding="0" cellspacing="0">
				<tr>
					<td valign="top" ><!------------Content begins here ------------------>
						<table width="100%" border="0" cellpadding="3" cellspacing="0">
							<TBODY>
								<tr >
									<td id="cgnLabel" name="cgnLabel" style="DISPLAY: none" width="20%" ><div align="right" valign="center" class="labelcell"> CG&nbsp;Number</div>
									</td>
									<td id="cgnText" name="cgnText" style="DISPLAY: none" width="28%">
									<span class="fieldcell"><input class="fieldinput" name="voucherHeader_cgn" id="voucherHeader_cgn" readOnly maxLength=10 lowsrc="" ></span>
									</td>
									<td width="16%" ><div align="right" valign="center" class="labelcell"> <span class="leadon"></span>&nbsp;</div>
									</td>
									<td width="34%" >&nbsp;</td>
								</tr>

								<tr >
									<td width="20%" ><div align="right" valign="center" class="labelcell">Voucher Number
									<span class="leadon">*</span></div>
									</td>
									<td width="28%" ><table cellpadding="0" cellspacing="0"><tr class=fieldcell>
										<td><input  type=text readonly style="WIDTH:25px; HEIGHT:20 " maxlength="2" name="vnum" id="vnum" style="Display:none"></td>
									    <td><input class="fieldinput" name="chequeDetail_payInSlipNumber" id="chequeDetail_payInSlipNumber" maxLength="10"  exilMustEnter="true" tabindex=1></td></tr></table>
									</td>
									<td width="16%" ><div align="right" valign="center" class="labelcell">Voucher Date<span class="leadon">*</span></div>
									</td>
									<td width="34%" >
									<span class="smallfieldcell"><input class="datefieldinput" name="chequeDetail_payInSlipDate" id="chequeDetail_payInSlipDate"   size="15" onkeyup="DateFormat(this,this.value,event,false,'3')" exilDataType="exilAnyDate" exilMustEnter="true" exilCalendar="true"  tabindex=1></span>
									</td>
								</tr>

								<tr >

									<td width="20%" ><div align="right" valign="center" class="labelcell">Fund<span class=leadon>*</span></div>
									</td>
									<td width="28%" ><span class="smallfieldcell"><select name="fund_name" id="fund_name" class="fieldinput" tabindex=1  onChange= "loadBanknfsource();getschemelist(this);" exilMustEnter ="true" exilListSource="fundNameList" ></select></span>
									 <INPUT type=hidden id="Fund_id" readOnly name="Fund_id">
									</td>
									<td></td>
									<td></td>
									</tr>
									<tr>
									<td width="16%" ><div align="right" valign="center" class="labelcell">Source of Financing</div>
									</td>
									<td width="34%">
									 <span class="smallfieldcell"><SELECT id="fundSource_id" name="fundSource_id" tabindex=1  onclick="checkfund()" class="fieldinput" ></SELECT>&nbsp;</span>
									</td>
									<td  valign="center" align=right>
								         <DIV  class="labelCell" >Scheme &nbsp;</DIV>
									</td>
									<td class="smallFieldcell"  height="35">
								        <SELECT  id="scheme" name="scheme"  class="fieldinput" onclick="checkfund()" tabindex=1  class="comboWidth1">
								        </SELECT>&nbsp;
									</td>
									</tr>


								<tr >
									<td width="20%" ><div  align="right" valign="center" class="labelcell"> Bank&nbsp;
									<span class="leadon">*</span></div>
									</td>
									<td width="28%" >
									<span class="smallfieldcell"><SELECT  name="bank_id" id="bank_id"  class="combowidth2" tabindex=1 onchange="bankChange()" exilMustEnter ="true" >
									</SELECT></span>
									</td>
									<td width="16%" >
									<div align="right" valign="center" class="labelcell">Account Number<span class="leadon">*</span></div>
									</td>
									<td width="34%" >
									<span class="smallfieldcell"><SELECT name="accountList" id="accountList"  class="fieldinput" tabindex=-1  onchange="accntMod(this);" exilMustEnter="true" >
                        			</SELECT></span>
                        			<span class="smallfieldcell">
									<input type="text" id="acc_Desc" name="acc_Desc" class="fieldinput" style="width:139; " readonly></span>
									</td>
								</tr>

								<tr >
									<td width="20%" style="display:none"><div align="right" valign="center" class="labelcell">Cheque In Hand</div>
									</td>
									<td width="28%" style="display:none">
								<input class="fieldinput" name="organizationStructure_chequeInHandId" id="organizationStructure_chequeInHandId" maxLength=10
            readOnly>
            <INPUT type=hidden id=organizationStructure_chequeInHandName readOnly name=organizationStructure_chequeInHandName>
									</td>
									<td width="16%" >
									<div align="right" valign="center" class="labelcell" >Narration</div>
									</td>
									<td width="34%"><TEXTAREA class=narrationfieldinput id=voucherDetail_narration name=voucherDetail_narration tabindex=1 exilDataType="exilAnyChar"></TEXTAREA>
									</td>
									<td></td>
									<td></td>
								</tr>
							</TBODY>
						</table>
					</td>
				</tr>
				<tr >
				<td><p class="smalltext"><span class="leadon">*</span>- Mandatory Fields</p></td></tr>
			</table>



						<table name="search" id="search" border="0" cellpadding="0" cellspacing="0" align=center>
						<tr >
								<td align="center">
									<input type="button" class="button" onclick=onSearch(); tabindex=1 value="Search"/>
								</td>
						</tr>
						<tr ><td width="100%">&nbsp;</td></tr>
						</table>
						

			<table width="100%"  border="0" cellpadding="0" cellspacing="0">
                 <tr>
                 	<td>
                    	<table width="100%" border="1" cellpadding="0" cellspacing="0" align="center" id="chqDetails">

							<tr class="thStlyle">
                            	<td width="5%" height="34" ><div align="center" >Sl No</div></td>
								<td width="15%" ><div align="center">Voucher Number</div></td>
                            	<td width="15%" style="display:none"><div align="center">Cheque Id</div></td>
                                <td width="15%" ><div align="center">Cheque No</div></td>
                                <td width="15%" ><div align="center">Cheque Date</div></td>
                                <td width="15%" ><div align="center">Receipt Date</div></td>
                                <!--<td width="15%"  style="DISPLAY: none><div align="center">Financing Source</div></td>-->
                                <td width="15%" ><div align="center">Amount</div></td>
                                <td width="5%" ><div align="center"><input type="checkbox" value="Select"  ID="selectChq" NAME="selectChq"
            onClick="selUnSelAll()" tabindex=1>select</div></td>
                         	</tr>

                            <tr class="labelcell">
                            	<td >
                                <div name="slNo" id="slNo">&nbsp;</div>
                                </td>
                                <td >
								<A onClick="getDetails(this)" href="#"><div name="vNumber" id="vNumber" tabindex=1>&nbsp;</div></a>
                                </td>
                                <td style="display:none">
									<input name="chequeDetail_Id" id="chequeDetail_Id" class="labelcell" style="width:150;height:20;text-align:right;" readonly ></span>
                                </td>
                                <td >
									<INPUT type="hidden" id=chequeNumber name=chequeNumber size="18" ><div name="chequeDetail_chequeNumber" id="chequeDetail_chequeNumber"></div>
                                </td>
                                <td >
									<INPUT type="hidden" id=chequeDate name=chequeDate><div name="chequeDetail_chequeDate" id="chequeDetail_chequeDate"></div>
								</td>
                                <td >
                                <div name="chequeDetail_receiptDate" id="chequeDetail_receiptDate">&nbsp;</div>
                                </td>
                                <!--<td style="DISPLAY: none>-->
								   <!--<div name="FundSrcName" id="FundSrcName">&nbsp;</div>-->
	                             <!--</td>-->
                                <td align="right" >
                                <span >
								<input name="chequeDetail_amount" id="chequeDetail_amount"  class="labelcell" readOnly style="WIDTH: 150;;text-align:right" size="15"></span>
                                </td>
                                <td align=middle >
									<input type=checkbox ID="selectChq" NAME="selectChq" value="ON" onClick="ifSelected();calcTotal()">
                                </td>
							</tr>

							   <tr class="labelcell">
                            	<td >
                                <div name="slNo" id="slNo">&nbsp;</div>
                                </td>
                                <td >
								<A onClick="getDetails(this)" href="#"><div name="vNumber" id="vNumber" tabindex=1>&nbsp;</div></a>
                                </td>
                                <td style="display:none">
									<span>
									<input name="chequeDetail_Id" id="chequeDetail_Id" style="WIDTH: 150;text-align:right;" class="labelcell" readonly></span>
                                </td>
                                <td >
									<INPUT type="hidden" id=chequeNumber name=chequeNumber ><div name="chequeDetail_chequeNumber" id="chequeDetail_chequeNumber"></div>
                                </td>
                                <td >
									<INPUT type="hidden" id=chequeDate name=chequeDate><div name="chequeDetail_chequeDate" id="chequeDetail_chequeDate"></div>
                                </td>
                                <td >
                                <div name="chequeDetail_receiptDate" id="chequeDetail_receiptDate">&nbsp;</div>
                                </td>
                                  <!--<td style="DISPLAY: none>-->
										<!--<div name="FundSrcName" id="FundSrcName">&nbsp;</div>-->
	                             <!--</td>-->
                                <td align="right" >
                                <span><input name="chequeDetail_amount" id="chequeDetail_amount" class="labelcell" readOnly style="WIDTH: 150px;;text-align:right " ></span>
                                       </td>
                                <td align=middle >
									<input type=checkbox ID="selectChq" NAME="selectChq" value="ON"  onClick="calcTotal()">
                                </td>
							</tr>

           				</table>
                 	</td>
                 </tr>
                 <tr>
                 	<td>
                    	<table width="100%" border="0" cellpadding="0" cellspacing="0" align="center" name="chqAmount" id="chqAmount" style="DISPLAY: none">

							
							<tr >
                            	<td >
								<div >&nbsp;</div>
                                </td>
                                <td >
								<div >&nbsp;</div>
                                </td>
                            	<td >
                                <div >&nbsp;</div>
                                </td>
                                <td >
									<div ><INPUT id=waa style="VISIBILITY: hidden;width:429; height:14" name=waa   size="29"></div>
                                </td>
                                <td >
                                <div >&nbsp;</div>
                                </td>
                                <td >
                                <div >&nbsp;</div>
                                </td>
                                <!--<td >-->
								 <!--<div >&nbsp;</div>-->
                                <!--</td>-->
                                <td align="right" >
                                <input name="fAmount" id="fAmount" class=labelcell readOnly style="WIDTH: 170px; HEIGHT: 22px;text-align:right" size=14>                                   </td>
                                   </td>
                                <td align=middle >
                                <div >
                                <input type=checkbox ID="selectChq" NAME="selectChq"
            value="ON" onClick="calcTotal()" style="VISIBILITY: hidden; WIDTH: 58px; HEIGHT: 20px"></div>
                                </td>
							</tr>
           				</table>
                 	</td>
                 </tr>
              </table>
				
			<table border="0" cellpadding="0" cellspacing="0" align="center" id=TABLE1 width="100%">
				<tr >
					<td colspan="4" align="middle"><!-- Buttons Start Here -->
					<table border="0" cellpadding="0" cellspacing="0"  align="center">
							 <tr id="submitGrid">
								 <td>
								 <input  id="saveandnewBelow" type="button" class="button" value="Save & New" tabindex=1 onclick="pressButton('savennew');"/>
								 <input   type="button" class="button" value="Save & Close" tabindex=1 onclick="pressButton('savenclose');" />
								 <input   type="button" class="button" value="Cancel" tabindex=1 onclick="onClickCancel()" />
								 <input   type="button" class="button" value="Close" tabindex=1 onclick=window.close(); />
								 <input   type="button" class="button" value="Show GlEntry" tabindex=1 onclick=showglEntry(); />
								 </td>
							</tr>
						</table>
							<table border="0" cellpadding="0" cellspacing="0"  align="center">
							 <tr id="submitGridBelow">
							 <td>
							 <input  id="saveandnewBelow" type="button" class="button" value="Save & New" tabindex=1 onclick="return ButtonPress('savennew');" style="display:none"/>
							 <input   type="button" class="button" value="Save & Close" tabindex=1 onclick="return ButtonPressed('savenclose');" />
							 <input   type="button" class="button" value="Close" tabindex=1 onclick=window.close(); />
							 <input   type="button" class="button" value="Show GlEntry" tabindex=1 onclick=showglEntry(); />
							 </td>
						</tr></table>						

				<table border="0" cellpadding="0" cellspacing="0" align="center" id=TABLE1 width="100%">
				<TBODY>
				<tr >
					<td colspan="4" align="middle"><!-- Buttons Start Here -->
						<table border="0" cellpadding="0" cellspacing="0" id=TABLE1 >
								<tbody>
								<tr id="reverseGrid">
										<td align="center" width=100% colspan=4>
										<input   type="button" class="button" value="Reverse" tabindex=1 onclick=reverse(); />
										</td>
								</tr>
								<tr id="backbutton" >
									<td width=100% align=center colspan=4>
									<input   type="button" class="button" value="Back" tabindex=1 onclick="back(window.self)" />

									</td>
								</tr>
								<tr id="reverseRecord"  style="DISPLAY: none">
									<td align="right"><span   valign="center" class="labelcell"> Voucher Number<SPAN class=leadon>*</SPAN></span>
									</td>
									<td><span class=fieldcell><input  class=fieldcell name="voucherHeader_newVcNo" id="voucherHeader_newVcNo" maxlength="10"   exilDataType="exilAlphaNumeric" style="width:148; height:19"></span>
									</td>
									<td align="right">
										<span   valign="center" class="labelcell" >Voucher Date<span class="leadon">*</span>
									</td>
									<td><span class=smallfieldcell> <INPUT class="smallfieldcell" name="voucherHeader_effDate" exilDataType="exilAnyDate" id   ="voucherHeader_effDate" style="WIDTH: 120x; HEIGHT: 19px" size="13" onkeyup="DateFormat(this,this.value,event,false,'3')" exilCalendar="true"></span></span>
									</td>
									<td><INPUT	 type   =hidden class   ="datefieldinput" name="diffDebit" id="diffDebit" style="WIDTH: 101px; HEIGHT: 19px"	size="13"></SPAN>
									</td>
								</tr>
								<tr>
								  <td colspan=4></td>
								<tr></tr>
								</tbody>
							</table>
					</td>
				</tr></TBODY></table><!-- Buttons End Here -->
				<table align="center" border="0" cellpadding="0" cellspacing="0">
					 				<tr id="reverseSubmit" style="display:none">
					 						<td width=100% align=center>
						 						<input type="button"  id="revsave" value="Submit" class="button" tabindex=1 onclick="pressButton('reverse');"/>
						 						<input type="button" id="revclose" value="Close" class="button" tabindex=1 onclick="window.close();" />
					 						</td>
									</tr>
					</table>
					</td>
					</table>
					
					 	 <table width="100%" border=0 cellpadding="3" cellspacing="0" id="showEntries" name="showEntries" style="DISPLAY: none">
							<tr >
							<td colspan=4>
							<table width="100%" align=center border="0" cellpadding="0" cellspacing="0" >
							<tr  height="25">
							 <TD class=displaydata align=center ><h4>GLEntry</h4></TD></tr>
							</table>
							</td>
							</tr>
							<tr ><td>
							<table width="80%" border="1" cellpadding="0" cellspacing="0" align=center id="entries" name="entries">
							<tr class="thStlyle">
								<td  ><div align="center" valign="center" > Code Type</div></td>
								<td  ><div align="center" valign="center" > Account Code</div></td>
								<td  ><div align="center" valign="center" > Account Head</div></td>
								<td  ><div align="center" valign="center" > Debit </div></td>
								<td  ><div align="center" valign="center" > Credit</div></td>
								<td  ><div align="center" valign="center" > Narration</div></td>
							</tr>
							<tr class="labelcell">
								<td ><div name="display_CodeType"  id="display_CodeType"   readOnly maxLength=10 tabIndex=0>&nbsp;</div></td>
								<td ><div name="display_Code"  id="display_Code"   readOnly maxLength=10 tabIndex=0>&nbsp;</div></td>
								<td ><div name="display_Head"  id="display_Head"  readOnly maxLength=10 tabIndex=0>&nbsp;</div></td>
								<td ><div name="display_Debit"  id="display_Ddebit"  readOnly maxLength=10 tabIndex=0>&nbsp;</div></td>
								<td ><div name="display_Credit"  id="display_Credit"  readOnly maxLength=10 tabIndex=0>&nbsp;</div></td>
								<td ><div name="display_Narration" id="display_Narration"  readOnly maxLength=10 tabIndex=0>&nbsp;</div></td>
							</tr>
							</table>
							</td>
							</tr>
						</table>

		</form>
	</body>
</html>
