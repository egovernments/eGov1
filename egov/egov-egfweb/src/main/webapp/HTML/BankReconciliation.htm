#-------------------------------------------------------------------------------
# eGov suite of products aim to improve the internal efficiency,transparency, 
#      accountability and the service delivery of the government  organizations.
#   
#       Copyright (C) <2015>  eGovernments Foundation
#   
#       The updated version of eGov suite of products as by eGovernments Foundation 
#       is available at http://www.egovernments.org
#   
#       This program is free software: you can redistribute it and/or modify
#       it under the terms of the GNU General Public License as published by
#       the Free Software Foundation, either version 3 of the License, or
#       any later version.
#   
#       This program is distributed in the hope that it will be useful,
#       but WITHOUT ANY WARRANTY; without even the implied warranty of
#       MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
#       GNU General Public License for more details.
#   
#       You should have received a copy of the GNU General Public License
#       along with this program. If not, see http://www.gnu.org/licenses/ or 
#       http://www.gnu.org/licenses/gpl.html .
#   
#       In addition to the terms of the GPL license to be adhered to in using this
#       program, the following additional terms are to be complied with:
#   
#   	1) All versions of this program, verbatim or modified must carry this 
#   	   Legal Notice.
#   
#   	2) Any misrepresentation of the origin of the material is prohibited. It 
#   	   is required that all modified versions of this material be marked in 
#   	   reasonable ways as different from the original version.
#   
#   	3) This license does not grant any rights to any user of the program 
#   	   with regards to rights under trademark law for use of the trade names 
#   	   or trademarks of eGovernments Foundation.
#   
#     In case of any queries, you can reach eGovernments Foundation at contact@egovernments.org.
#-------------------------------------------------------------------------------
<!doctype html public "-//W3C//DTD HTML 4.0 Transitional//EN">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
<meta http-equiv="KEYWORDS" content="">
<meta http-equiv="DESCRIPTION" content="">
<!-- Inclusion of the CSS files that contains the styles -->
<link rel=stylesheet href="../exility/global.css" type="text/css">
<SCRIPT LANGUAGE="javascript" SRC="../exility/ExilityParameters.js"></SCRIPT>
<SCRIPT LANGUAGE="javascript" SRC="../exility/PageManager.js"></SCRIPT>
<SCRIPT LANGUAGE="javascript" SRC="../exility/PageValidator.js"></SCRIPT>
<SCRIPT LANGUAGE="javascript" SRC="../script/jsCommonMethods.js"></SCRIPT>
		<SCRIPT type="text/javascript" src="../script/calendar.js" type="text/javascript" ></SCRIPT>
<script language="javascript">
	window.dataRetreived=false;
	var buttonMode = "", first='true';
	function onBodyLoad()
	{
		PageValidator.addCalendars();
		PageManager.ListService.callListService();

		if(PageManager.DataService.getQueryField('bank_id') != null){
			getAccountNumbers();
			var cDate=PageManager.DataService.getQueryField('reconcileDate');
			if(cDate){
			 document.getElementById('reconcileDate').value=cDate;
			}
			var bankSta=PageManager.DataService.getQueryField('bankStatement');
			if(bankSta){
			 document.getElementById('bsBalance').value=bankSta;
			 }
			viewStatus();
		}
	}
	function beforeRefreshPage(dc){
	}
	function afterRefreshPage(dc)
	{


		var i, row, table, t, tableObj, divReconcile, gridbankentry, gridaccbalance;

		tableObj = dc.grids['gridBankReconciliation'];
			if(!tableObj) return ;

		if(buttonMode == "reconcile")
		{

			divReconcile = document.getElementById('gridSubmit')
			divReconcile.style.visibility = 'visible';
			gridbankentry = document.getElementById('gridBankEntry');
			gridbankentry.style.visibility = 'hidden';
			for(i=1; i<tableObj.length; i++)
			{
				if(tableObj.length == 2)
					obj = document.bankReconciliation.bankReconciliation_ID;
				else
					obj = document.bankReconciliation.bankReconciliation_ID[i-1];

				row=PageManager.DataService.getRow(obj);
				table = document.getElementById('gridBankReconciliation');
				t=PageManager.DataService.getControlInBranch(table.rows[row.rowIndex],"bankReconciliation_srNo");
				t.innerHTML = i;
				t=PageManager.DataService.getControlInBranch(table.rows[row.rowIndex],"bankReconciliation_clearanceDate");
				//t.innerHTML = '<input name=clearanceDate id=clearanceDate maxlength=11 size=12 exilDataType=exilPastDate onMouseDown=fillDate(this)>&nbsp;';
				t.innerHTML = '<input name=clearanceDate id=clearanceDate maxlength=11 size=12 exilDataType=exilPastDate><A onclick=fillDate(this) tabIndex=-1 href=#><IMG tabIndex=-1 src=/egi/resources/erp2/images/calendar.gif width=22 height=22></A>&nbsp;';
				t=PageManager.DataService.getControlInBranch(table.rows[row.rowIndex],"bankReconciliation_transactionDate");
				formatDates(t);
			}
		}

		if(buttonMode == "view")
		{

			divReconcile = document.getElementById('gridSubmit');
			divReconcile.style.visibility = 'hidden';
			gridbankentry = document.getElementById('gridBankEntry');
			gridbankentry.style.visibility = 'visible';


			for(i=1; i<tableObj.length; i++)
			{
				if(tableObj.length == 2)
					obj = document.bankReconciliation.bankReconciliation_ID;
				else
					obj = document.bankReconciliation.bankReconciliation_ID[i-1];

				row=PageManager.DataService.getRow(obj);
				table = document.getElementById('gridBankReconciliation');
				t=PageManager.DataService.getControlInBranch(table.rows[row.rowIndex],"bankReconciliation_srNo");
				t.innerHTML = i;
				t=PageManager.DataService.getControlInBranch(table.rows[row.rowIndex],"bankReconciliation_transactionDate");
				formatDates(t);

				t=PageManager.DataService.getControlInBranch(table.rows[row.rowIndex],"bankReconciliation_clearanceDate");
				t.innerHTML = '&nbsp;';
			}

			table1 = document.getElementById('gridBankR');
			var obj=PageManager.DataService.getControlInBranch(table1.rows[1],"accountBalanceDebit");
			obj.innerHTML="&nbsp;";
			var obj1=PageManager.DataService.getControlInBranch(table1.rows[1],"accountBalanceCredit");
			obj1.innerHTML="&nbsp;";
			var obj11=PageManager.DataService.getControlInBranch(table1.rows[2],"addAmountDebit");
			obj11.innerHTML="&nbsp;";
			var obj2=PageManager.DataService.getControlInBranch(table1.rows[2],"addAmountCredit");
			obj2.innerHTML="&nbsp;";
			var obj3=PageManager.DataService.getControlInBranch(table1.rows[3],"addOthersAmountDebit");
			obj3.innerHTML="&nbsp;";
			var obj4=PageManager.DataService.getControlInBranch(table1.rows[3],"addOthersAmountCredit");
			obj4.innerHTML="&nbsp;";
			var obj5=PageManager.DataService.getControlInBranch(table1.rows[4],"subTotalAmountDebit");
			obj5.innerHTML="&nbsp;";
			var obj6=PageManager.DataService.getControlInBranch(table1.rows[4],"subTotalAmountCredit");
			obj6.innerHTML="&nbsp;";
			var obj7=PageManager.DataService.getControlInBranch(table1.rows[5],"lessAmountDebit");
			obj7.innerHTML="&nbsp;";
			var obj8=PageManager.DataService.getControlInBranch(table1.rows[5],"lessAmountCredit");
			obj8.innerHTML="&nbsp;";
			var obj9=PageManager.DataService.getControlInBranch(table1.rows[6],"lessOthersAmountDebit");
			obj9.innerHTML="&nbsp;";
			var obj10=PageManager.DataService.getControlInBranch(table1.rows[6],"lessOthersAmountCredit");
			obj10.innerHTML="&nbsp;";
			var obj12=PageManager.DataService.getControlInBranch(table1.rows[7],"totalAmountDebit");
			obj12.innerHTML="&nbsp;";
			var obj13=PageManager.DataService.getControlInBranch(table1.rows[7],"totalAmountCredit");
			obj13.innerHTML="&nbsp;";
			var obj14=PageManager.DataService.getControlInBranch(table1.rows[8],"bankBalanceDebit");
			obj14.innerHTML="&nbsp;";
			var obj15=PageManager.DataService.getControlInBranch(table1.rows[8],"bankBalanceCredit");
			obj15.innerHTML="&nbsp;";



			var accBalance="0";
			if(dc.values['totalAmount'])
			{
			 var accBalance=dc.values['totalAmount'];
			}
			accBal=parseFloat(accBalance,10)
			var drTotal=dc.values['brs_debitTotal'];
			if(!drTotal)
			drTotal=0;
			var drTotalOthers=dc.values['brs_debitTotalOthers'];
			if(!drTotalOthers)
			drTotalOthers=0;
			var crTotal=dc.values['brs_creditTotal'];
			if(!crTotal)
			crTotal=0;
			var crTotalOthers=dc.values['brs_creditTotalOthers'];
			if(!crTotalOthers)
			crTotalOthers=0;

			subTotal=PageManager.DataService.getControlInBranch(table1.rows[4],"subTotalAmountDebit");
			subTotal1=PageManager.DataService.getControlInBranch(table1.rows[4],"subTotalAmountCredit")
			crT=parseFloat(crTotal,10);
			crTO=parseFloat(crTotalOthers,10);
			drT=parseFloat(drTotal,10);
			drTO=parseFloat(drTotalOthers,10);
			sTotal=accBal+(crT+crTO)
			if(sTotal>0)
			subTotal.innerHTML=sTotal;
			else
			subTotal1.innerHTML=-(sTotal);
			netTotal=PageManager.DataService.getControlInBranch(table1.rows[7],"totalAmountDebit");
			netTotal1=PageManager.DataService.getControlInBranch(table1.rows[7],"totalAmountCredit");
			nTotal=(accBal+crT+crTO)-(drT+drTO);
			if(nTotal>0)
			netTotal.innerHTML=nTotal;
			else
			netTotal1.innerHTML=-(nTotal);

			bankValue=PageManager.DataService.getControlInBranch(table1.rows[8],"bankBalanceDebit");
			bankValue.innerHTML=document.getElementById('bsBalance').value;

			t=PageManager.DataService.getControlInBranch(table1.rows[1],"accountBalanceDebit");
			t1=PageManager.DataService.getControlInBranch(table1.rows[1],"accountBalanceCredit");
			if(accBal >= 0)
			t.innerHTML = accBalance;
			else
			t1.innerHTML = -(accBalance);

			t2=PageManager.DataService.getControlInBranch(table1.rows[2],"addAmountDebit");
			t3=PageManager.DataService.getControlInBranch(table1.rows[2],"addAmountCredit");
			if(crT >= 0)
			t2.innerHTML = crTotal;
			else
			t3.innerHTML = crTotal;

			t4=PageManager.DataService.getControlInBranch(table1.rows[3],"addOthersAmountDebit");
			t5=PageManager.DataService.getControlInBranch(table1.rows[3],"addOthersAmountCredit");
			if(crTO >= 0)
			t4.innerHTML = crTotalOthers;
			else
			t5.innerHTML = crTotalOthers;


			t6=PageManager.DataService.getControlInBranch(table1.rows[5],"lessAmountDebit");
			t7=PageManager.DataService.getControlInBranch(table1.rows[5],"lessAmountCredit");
			if(drT >= 0)
			t6.innerHTML = drTotal;
			else
			t7.innerHTML = drTotal;


			t8=PageManager.DataService.getControlInBranch(table1.rows[6],"lessOthersAmountDebit");
			t9=PageManager.DataService.getControlInBranch(table1.rows[6],"lessOthersAmountCredit");
			if(drTO >= 0)
			t8.innerHTML = drTotalOthers;
			else
			t9.innerHTML = drTotalOthers;




		}


	}
	function formatDates(ctrl)
	{

		ctrl.innerHTML=formatDate(ctrl.innerHTML.substring(0, 10));
	}

		 //return values: 0 means dt1=dt2, -1 means dt1<dt2,  1 means dt1>dt2
	 function compareDate(dt1, dt2){
			var d1, m1, y1, d2, m2, y2, ret;
			dt1 = dt1.split('/');
			dt2 = dt2.split('/');
			ret = (eval(dt2[2])>eval(dt1[2])) ? 1 : (eval(dt2[2])<eval(dt1[2])) ? -1 : (eval(dt2[1])>eval(dt1[1])) ? 1 : (eval(dt2[1])<eval(dt1[1])) ? -1 : (eval(dt2[0])>eval(dt1[0])) ? 1 : (eval(dt2[0])<eval(dt1[0])) ? -1 : 0 ;
			return ret;
		 }
	function fillDate(obj)
	{
		PageValidator.showCalendar('selectedDate');
		row = PageManager.DataService.getRow(obj);
		table = document.getElementById('gridBankReconciliation');
		ctrl = PageManager.DataService.getControlInBranch(table.rows[row.rowIndex], 'clearanceDate');
		ctrl.value = document.getElementById('selectedDate').value;
		document.getElementById('selectedDate').value = "";
	}
	function getAccountNumbers()
	{
		document.getElementById('bankAccount_accountNumberId').innerHTML = '';

		if(first == 'false')
			document.getElementById('btnStatement').innerHTML = 'Refresh';
		var branchid;
		var ctrl = document.getElementById('bank_id');

		if(PageManager.DataService.getQueryField('bank_id') != null && PageManager.DataService.getQueryField('bank_id') != "")
			branchid = PageManager.DataService.getQueryField('bank_id');
		else
			branchid = ctrl.options[ctrl.selectedIndex].value;

		var a = Array(2);
		a = branchid.split('-');
		branchid = a[1];

		var obj = document.getElementById('bankAccount_accountNumberId');
		obj.setAttribute('exilListSource','accountList');

		PageManager.DataService.setQueryField('branchId',branchid);
		PageManager.DataService.callDataService('accNumber');
	}
	function onChangeAccNum(){
		if(first == 'false')
			document.getElementById('btnStatement').innerHTML = 'Refresh';
	}
	function reconcile()
	{
		showColumn(6);
		if(!PageValidator.validateForm())
			return false;

		buttonMode = "reconcile";


		if(PageManager.DataService.getQueryField('bank_id') != null && PageManager.DataService.getQueryField('bank_id') != "")
		{
			PageManager.DataService.setQueryField('qAccountNumberId', PageManager.DataService.getQueryField('bankAccount_accountNumberId'));
			PageManager.DataService.removeQueryField('bankAccount_accountNumberId');
			PageManager.DataService.removeQueryField('bank_id');
		}
		else
		{
			if(!PageValidator.validateForm())
				return false;
			var obj = document.getElementById('bankAccount_accountNumberId');
			PageManager.DataService.setQueryField('qAccountNumberId', obj.options[obj.selectedIndex].value);
		}

		var grid = document.getElementById('gridBankReconciliation')
		grid.style.visibility = 'visible';
		var grid = document.getElementById('gridBankR')
		grid.style.display = 'none';
		var grid2 = document.getElementById('tableCaption')
		grid2.style.display = 'none';
		PageManager.DataService.setQueryField('qReconcileDate',  formatDate5(document.getElementById('reconcileDate').value));
		PageManager.DataService.callDataService('jobReconciliationView');

	}
	function viewStatus()
	{
		hideColumn(6);
		var grid = document.getElementById('gridBankR')
		grid.style.display = 'block';
		var grid2 = document.getElementById('tableCaption')
		grid2.style.display = 'block';
		if(document.getElementById('bankAccount_accountNumberId').selectedIndex != -1){
			first = 'false';
			document.getElementById('btnStatement').innerHTML = 'View BRS';
		}


		if(PageManager.DataService.getQueryField('bank_id') != null && PageManager.DataService.getQueryField('bank_id') != "")
		{
			PageManager.DataService.setQueryField('qAccountNumberId', PageManager.DataService.getQueryField('bankAccount_accountNumberId'));
			PageManager.DataService.removeQueryField('bankAccount_accountNumberId');
			PageManager.DataService.removeQueryField('bank_id');
		}
		else
		{
			if(!PageValidator.validateForm())
				return false;
			var obj = document.getElementById('bankAccount_accountNumberId');
			PageManager.DataService.setQueryField('qAccountNumberId', obj.options[obj.selectedIndex].value);
		}

		buttonMode = "view";
		var gridBr = document.getElementById("gridBankR")
		gridBr.style.visibility = 'visible';
		var gridBr1 = document.getElementById("gridBankReconciliation")
		gridBr1.style.visibility = 'visible';
		var gridBr2 = document.getElementById("tableCaption")
		gridBr2.style.visibility = 'visible';
		var reconcileDate=document.getElementById('reconcileDate').value;

		//PageManager.DataService.setQueryField('qReconcileDate',  document.getElementById('reconcileDate').value);
	//	PageManager.DataService.setQueryField('qReconcileDate1',  document.getElementById('reconcileDate').value);
		PageManager.DataService.setQueryField('qReconcileDate',  formatDate5(reconcileDate));
		PageManager.DataService.setQueryField('qReconcileDate1',  formatDate5(reconcileDate));
		PageManager.DataService.callDataService('jobReconciliationView');
	}

	function ButtonPress(name)
	{
		var flag=false, transDate, clearDate, ctrl, table = document.getElementById('gridBankReconciliation');
		if(table == null) return;

		for(var i=1; i<table.rows.length; i++){
			ctrl = PageManager.DataService.getControlInBranch(table.rows[i], 'bankReconciliation_transactionDate');
			transDate = formatDate_DDMMYYYY(ctrl.innerHTML);
			ctrl = PageManager.DataService.getControlInBranch(table.rows[i], 'clearanceDate');
			if(ctrl.value != ''){
				flag = true;
				//clearDate = formatDate_DDMMYYYY(ctrl.value);
				clearDate = ctrl.value;
				if(compareDate(clearDate, transDate) == 1){
					alert('clearance date can not be less than cheque date, check row no. ' + i);
					return false;
				}
			}
		}
		if(!flag) {
			alert('no transaction to reconcile');
			return false;
		}

		if(!PageValidator.validateForm()) return false;

		if(buttonMode == "reconcile")
			PageManager.UpdateService.submitForm('reconcile');
	}
	function formatDate_DDMMYYYY(date){
		var newDate, mon;
			date = date.split('-');
			switch(date[1]){
				case 'Jan': mon = '01'; break;
				case 'Feb': mon = '02'; break;
				case 'Mar': mon = '03'; break;
				case 'Apr': mon = '04'; break;
				case 'May': mon = '05'; break;
				case 'Jun': mon = '06'; break;
				case 'Jul': mon = '07'; break;
				case 'Aug': mon = '08'; break;
				case 'Sep': mon = '09'; break;
				case 'Oct': mon = '10'; break;
				case 'Nov': mon = '11'; break;
				case 'Dec': mon = '12'; break;
				default: mon = 'not valid';
			}
			if(mon == 'not valid'){
				alert('month is not valid, please chaeck.');
				return false;
			}
			newDate = date[0] + '/' + mon + '/' + date[2];
			return newDate;
	}
	function bankEntry()
	{
		if(!PageValidator.validateForm())
			return false;

		var obj, accId, accNo, accBal, bankBal, diff, bank_id, bank;
		obj = document.getElementById('bankAccount_accountNumberId');
		accId = obj.options[obj.selectedIndex].value;
		accNum = obj.options[obj.selectedIndex].text;

		obj = document.getElementById('bank_id');
		bank_id = obj.options[obj.selectedIndex].value;
		bank = obj.options[obj.selectedIndex].text;

		table1 = document.getElementById('gridBankR');
		t=PageManager.DataService.getControlInBranch(table1.rows[1],"accountBalanceDebit");
			accBal=t.innerHTML;


		//window.location = "BankEntry.htm?bankId=" + bank_id + "&bankName=" + bank + "&bankAccount_accountId=" + accId + "&bankAccount_accountNumber="+accNum+"&accBalance="+accBal+"&bankStatement="+document.getElementById('bsBalance').value;
		//window.location = "selectBankEntry.htm?bankId=" + bank_id + "&bankName=" + bank + "&bankAccount_accountId=" + accId + "&bankAccount_accountNumber="+accNum+"&accBalance="+accBal+"&bankStatement="+document.getElementById('bsBalance').value;
		window.open("selectBankEntry.htm","","height=650,width=900,scrollbars=yes,left=20,top=20,status=yes");
		//window.open("selectBankEntry.htm");
	}

	function afterUpdateService()
	{
		var accNumId, bankId, obj;
		obj = document.getElementById('bankAccount_accountNumberId');
		accNumId = obj.options[obj.selectedIndex].value;
		obj = document.getElementById('bank_id');
		bankId = obj.options[obj.selectedIndex].value;
		window.location = "BankReconciliation.htm?bankAccount_accountNumberId="+accNumId+"&bank_id="+bankId+"&reconcileDate="+document.getElementById('reconcileDate').value+"&bankStatement="+document.getElementById('bsBalance').value
	}
	function hideColumn(index){
		var table=document.getElementById('gridBankReconciliation');
	   	for(var i=0;i<table.rows.length;i++){
			table.rows[i].cells[index].style.display="none";
	   	}
	}
	function showColumn(index){
		var table=document.getElementById('gridBankReconciliation');
	   	for(var i=0;i<table.rows.length;i++){
			table.rows[i].cells[index].style.display="block";
	   	}
	}

</script>

</head>
<body onLoad="onBodyLoad()" onKeyDown ="CloseWindow(event);" bgcolor="#ffffff" bottommargin="0" topmargin="0" rightmargin="0" leftmargin="0" marginheight="0" marginwidth="0">
<form name="bankReconciliation">
	<table width="100%" border=0 cellpadding="0" cellspacing="0"><!------------Content begins here ------------------>
			<tr>
			<td valign="top" class="normaltext">
						<table width="100%" border=0 cellpadding="3" cellspacing="0" id=TABLE1>
							<tr>
								<td class="rowheader" colspan="4" width="884"><span class="headerwhite2">Bank Reconciliation</span></td>
							</tr>
							<tr class="row2">
								<td width="20%"><DIV class=normaltext align=right>Bank And Branch<SPAN class="leadon">*</SPAN></DIV>  </td>
								<td width="30%" align="left"><select name="bank_id" id="bank_id" class="fieldinput" onChange="getAccountNumbers()" exilMustEnter="true" exilListSource="bankAndBranch"></select></td>
								<td width="30%"><DIV class=normaltext align=right>Account Number<SPAN class="leadon">*</SPAN></DIV> </td>
								<td width="20%" align="left"><select name="bankAccount_accountNumberId" id="bankAccount_accountNumberId" onChange="onChangeAccNum()" class="fieldinput" exilMustEnter="true"></select></td>
							</tr>

							<tr class="row1">
								<td><DIV class=normaltext align=right>Bank&nbsp;Statement&nbsp;Balance</DIV></td>
								<td align="left"><input name="bsBalance" id="bsBalance" exilMustEnter="true" exilDataType="exilUnsignedDecimal">&nbsp;</td>
								<td><DIV class=normaltext align=right>Bank&nbsp;Statement&nbsp;date</DIV></td>
								<td align="left"><input name="reconcileDate" id="reconcileDate" maxlength="11" size="12" onkeyup="DateFormat(this,this.value,event,false,'3')" exilMustEnter="true" exilDataType="exilPastDate" exilCalendar="true">&nbsp;</td>
							</tr>
							<tr class="row2">
							   <td height="25" colspan="6" valign="bottom" class="smalltext"><p class="smalltext"><span class="leadon">*</span>
									- Mandatory Fields</p>
							   </td>
							</tr>
							<tr class="row2">
								<td colspan="6" align="middle" width="100%"><!-- Buttons Start Here -->
									<table border="0" cellpadding="0" cellspacing="0" id=TABLE2>
										<tr>
											<td align="right"><IMG height=18 src="/egi/resources/erp2/images/Button_leftside.gif" width=7></td>
											<td bgcolor="#fe0000" valign="center" nowrap><A class=buttonprimary onclick=reconcile() href="#">Reconcile</A></td>
											<td><IMG height=18 src="/egi/resources/erp2/images/Button_rightside.gif" width=7></td>
											<td><IMG src="/egi/resources/erp2/images/spacer.gif" width=8></td>
											<td align="right"><IMG height=18 src="/egi/resources/erp2/images/Button_second_leftside.gif" width=6></td>
											<td bgcolor="#ffffff" valign="center" nowrap background="/egi/resources/erp2/images/Button_second_middle.gif"><A class=buttonsecondary onclick=viewStatus() href="#"><div name="btnStatement" id="btnStatement">View BRS</div></A></td>
											<td><IMG height=18 src="/egi/resources/erp2/images/Button_second_rightside.gif" width=6></td>
											<td><IMG src="/egi/resources/erp2/images/spacer.gif" width=8></td>
											<td align="right"><IMG height=18 src="/egi/resources/erp2/images/Button_second_leftside.gif" width=6></td>
											<td bgcolor="#ffffff" valign="center" nowrap background="/egi/resources/erp2/images/Button_second_middle.gif"><A class=buttonsecondary href="BRSClearanceMod.htm"><div name="btnModify" id="btnModify">Modify Clearance Date</div></A></td>
											<td><IMG height=18 src="/egi/resources/erp2/images/Button_second_rightside.gif" width=6></td>
											<td><IMG src="/egi/resources/erp2/images/spacer.gif" width=8></td>
											<td align="right"><IMG height=18 src="/egi/resources/erp2/images/Button_second_leftside.gif" width=6></td>
											<td bgcolor="#ffffff" valign="center" nowrap background="/egi/resources/erp2/images/Button_second_middle.gif"><A class=buttonsecondary onclick=window.close() href="#">Close</A></td>
											<td><IMG height=18 src="/egi/resources/erp2/images/Button_second_rightside.gif" width=6></td>
										</tr>
									</table><!-- Buttons End Here -->
								</td>
							</tr>
						</table>
				</td>
		  </tr><!------------ Content ends here ------------------>
		  <tr >
		  <td colspan=6>&nbsp;</td>
		  </tr>
		  <tr>
		  <td align="middle" width="80%" height="80%">
		 <table align=center width="80%" border="1" cellpadding="0" cellspacing="0" ID="gridBankR" name="gridBankR" style="VISIBILITY: hidden">
          <tr class="rowheader" style="HEIGHT: 22px">
			<td width="70%" class="columnheader" height=26><div align="center" >Particulars</div></td>
			<td width="15%" class="columnheader" height=26><div align="center" >Amount (Rs)</div></td>
			<td width="15%" class="columnheader" height=26><div align="center" >Amount (Rs)</div></td>
		 </tr>
         <tr >
             <td class="normaltext" height=26 valign="center" >&nbsp;&nbsp;&nbsp; Balance as per Cash Book</td>
             <td class="normaltext"><div align="right" name="accountBalanceDebit" id="accountBalanceDebit" readOnly>&nbsp;</div></td>
             <td class="normaltext"><div align="right" name="accountBalanceCredit" id="accountBalanceCredit" readOnly>&nbsp;</div></td>
          </tr>
          <tr>
          <td class="normaltext" height=26 valign="center">&nbsp;&nbsp;&nbsp;Add: Cheques issued but not presented in bank</td>
          <td class="normaltext"><div align="right" name="addAmountDebit" id="addAmountDebit" readOnly>&nbsp;</div></td>
          <td class="normaltext"><div align="right" name="addAmountCredit" id="addAmountCredit" readOnly>&nbsp;</div></td>
          </tr>
          <tr>
          <td class="normaltext" height=26 valign="center">&nbsp;&nbsp;&nbsp;Add: Credit given by Bank either for interest or for any other account<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; but not accounted for in Bank Book</td>
          <td class="normaltext"><div align="right" name="addOthersAmountDebit" id="addOthersAmountDebit" readOnly>&nbsp;</div></td>
          <td class="normaltext"><div align="right" name="addOthersAmountCredit" id="addOthersAmountCredit" readOnly>&nbsp;</div></td>
          </tr>
          <tr >
          <td class="normaltext" height=26 align="middle" valign="center"><i>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Sub-total</i></td>
          <td class="normaltext"><div align="right" name="subTotalAmountDebit" id="subTotalAmountDebit" readOnly>&nbsp;</div></td>
          <td class="normaltext"><div align="right" name="subTotalAmountCredit" id="subTotalAmountCredit" readOnly>&nbsp;</div></td>
          </tr>
          <tr class="normaltext">
			<td class="normaltext" height=26 valign="center">&nbsp;&nbsp;&nbsp; Less: Cheques Deposited but not cleared</td>
			<td class="normaltext"><div align="right" name="lessAmountDebit" id="lessAmountDebit" readOnly>&nbsp;</div></td>
          	<td class="normaltext"><div align="right" name="lessAmountCredit" id="lessAmountCredit" readOnly>&nbsp;</div></td>
		  </tr>
          <tr >
			 <td class="normaltext" height=26 valign="center">&nbsp;&nbsp;&nbsp; Less: Service Charges / Bank Charges or any other charge levied by<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; the Bank but not accounted for Bank book</td>
			<td class="normaltext"><div align="right" name="lessOthersAmountDebit" id="lessOthersAmountDebit" readOnly>&nbsp;</div></td>
          <td class="normaltext"><div align="right" name="lessOthersAmountCredit" id="lessOthersAmountCredit" readOnly>&nbsp;</div></td>
		   </tr>
		   <tr >
		 <td class="normaltext" height=26 align="middle" valign="center"><i>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Net-total</i></td>
		 <td class="normaltext"><div align="right" name="totalAmountDebit" id="totalAmountDebit" readOnly>&nbsp;</div></td>
		 <td class="normaltext"><div align="right" name="totalAmountCredit" id="totalAmountCredit" readOnly>&nbsp;</div></td>
          </tr>
		   <tr >
		   <td class="normaltext" height=26 valign="center">&nbsp;&nbsp;&nbsp; Bank Balance as per Bank Statement</td>
			<td class="normaltext" ><div align="right" name="bankBalanceDebit" id="bankBalanceDebit" readOnly>&nbsp;</div></td>
         	 <td class="normaltext"><div align="right" name="bankBalanceCredit" id="bankBalanceCredit" readOnly>&nbsp;</div></td>
		   </tr>
		   </table>
		   </td>
		   </tr>
		   <tr>
		   <td align="middle" width="80%" height="80%">
		   			<table width="80%" align=center border="0" cellpadding="0" cellspacing="0" id="tableCaption" name="tableCaption" style="VISIBILITY: hidden">
		   			<tr >
		   			<TD class=displaydata align=center><h4>Details</h4></TD>
		   			</tr>
		   			</table>
		   	</td>
		    </tr>
		   <tr>
		   <td align="middle" width="80%" height="80%">
			<table width ="80%" border=1 align="center" cellpadding="5" cellspacing="0" id="gridBankReconciliation" name="gridBankReconciliation" style="VISIBILITY: hidden">
			<tr class="rowheader" style="HEIGHT: 22px">
				<td class="columnheader" width="10%"><div align="center">Sr&nbsp;No</div></td>
				<td class="columnheader" width="20%"><div align="left">Doc&nbsp;Date</div></td>
				<td class="columnheader" width="20%"><div align="left">Reference Number</div></td>
				<td class="columnheader" width="20%"><div align="left">Type</div></td>
				<td class="columnheader" width="15%"><div align="right">Debit</div></td>
				<td class="columnheader" width="15%"><div align="right">Credit</div></td>
				<td class="columnheader" width="20%"><div align="center" name="HdrCCDate" id="HdrCCDate">Clearance&nbsp;Date</div><input type="hidden" size=1 name="selectedDate" id="selectedDate"></td>
			</tr>
			<tr>
				<td class="normaltext">
					<div align="right" id=bankReconciliation_srNo name="bankReconciliation_srNo">&nbsp;</div>
					<input type="hidden" name="bankReconciliation_ID" id="bankReconciliation_ID">
				</td>
				<td class="normaltext"><div align="left" name="bankReconciliation_transactionDate" id="bankReconciliation_transactionDate"></div> </td>
				<td class="normaltext"><div align="left" name="bankReconciliation_chequeNumber"></div> </td>
				<td class="normaltext"><div align="middle" name="bankReconciliation_type"></div>&nbsp;&nbsp; </td>
				<td class="normaltext"><div align="right" name="bankReconciliation_debit"></div>&nbsp;&nbsp; </td>
				<td class="normaltext"><div align="right" name="bankReconciliation_credit"></div>&nbsp;&nbsp; </td>
				<td class="normaltext"><div align="right" name="bankReconciliation_clearanceDate"><input name="clearanceDate" id="clearanceDate" maxlength="11" size="12" onkeyup="DateFormat(this,this.value,event,false,'3')" exilDataType="exilPastDate"><A onclick=fillDate(this) tabIndex=-1 href="#"><IMG tabIndex=-1 height=22 src="/egi/resources/erp2/images/calendar.gif" width=22></A></div> </td>
			</tr>
			</table>
		</td>
		</tr>

		<tr >
		  <td colspan=6>&nbsp;</td>
		  </tr>

				<tr>
					<td align=middle>
						<table border="0" cellpadding="0" cellspacing="0" name="gridSubmit" id="gridSubmit" style="VISIBILITY: hidden">
							<tr>
								<td align="right"><IMG height=18 src="/egi/resources/erp2/images/Button_leftside.gif" width=7></td>
								<td bgcolor="#fe0000" valign="center" nowrap><A class=buttonprimary onclick=ButtonPress('saveclose') href="#">Submit</A></td>
								<td><IMG height=18 src="/egi/resources/erp2/images/Button_rightside.gif" width=7></td>
								<td><IMG src="/egi/resources/erp2/images/spacer.gif" width=8></td>
								<td align="right"><IMG height=18 src="/egi/resources/erp2/images/Button_second_leftside.gif" width=6></td>
								<td bgcolor="#ffffff" valign="center" nowrap background="/egi/resources/erp2/images/Button_second_middle.gif"><A class=buttonsecondary onclick=window.close() href="#">Close</A></td>
								<td><IMG height=18 src="/egi/resources/erp2/images/Button_second_rightside.gif" width=6></td>
							</tr>
						</table>
					</td>
				</tr>
										<tr>
											<td><!------------  Bank Entry Starts  ------------>
												<table  width="100%" border=0 cellpadding="0" cellspacing="0" name="gridBankEntry" id="gridBankEntry" style="VISIBILITY: hidden">
													<tr class="row1" height =25 style="DISPLAY: none">
														<td>&nbsp;</td>
														<td class="normaltext"><div align="right">Enter Bank Balance&nbsp;&nbsp;</div></td>
														<td class="normaltext"><input size=12 align="left" id=bankReconciliation_bankBalance name="bankReconciliation_bankBalance" maxlength="10" exilDataType="exilUnsignedDecimal" exilMin="0" exilMax="999999.99"></td><!--onKeyUp=chkDifference(this)-->
														<td>&nbsp;</td>
														<td class="normaltext"><div align="right">Difference&nbsp;&nbsp;</div></td>
														<td class="normaltext"><input size=12 align="left" id="bankReconciliation_difference" name="bankReconciliation_difference" readOnly></td>
													</tr>
													<tr ><td colspan=6>&nbsp;</td></tr>
													<tr >
														<td colspan="6" align="middle" width="100%">
															<table border="0" cellpadding="0" cellspacing="0">
																<tr>
																	<td align="right"><IMG height=18 src="/egi/resources/erp2/images/Button_leftside.gif" width=7></td>
																	<td bgcolor="#fe0000" valign="center" nowrap><A class=buttonprimary onclick=bankEntry() href="#">Bank Entry</A></td>
																	<td><IMG height=18 src="/egi/resources/erp2/images/Button_rightside.gif" width=7></td>
																</tr>
															</table>
														</td>
													</tr>
												</table><!------------  Bank Entry Ends  ------------>
											</td>
										</tr>

									</table>
									</DIV>
								<td></td>
							</tr>
	</table>
</form>
</body>
</html>
