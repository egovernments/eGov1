#-------------------------------------------------------------------------------
# eGov suite of products aim to improve the internal efficiency,transparency, 
#      accountability and the service delivery of the government  organizations.
#   
#       Copyright (C) <2015>  eGovernments Foundation
#   
#       The updated version of eGov suite of products as by eGovernments Foundation 
#       is available at http://www.egovernments.org
#   
#       This program is free software: you can redistribute it and/or modify
#       it under the terms of the GNU General Public License as published by
#       the Free Software Foundation, either version 3 of the License, or
#       any later version.
#   
#       This program is distributed in the hope that it will be useful,
#       but WITHOUT ANY WARRANTY; without even the implied warranty of
#       MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
#       GNU General Public License for more details.
#   
#       You should have received a copy of the GNU General Public License
#       along with this program. If not, see http://www.gnu.org/licenses/ or 
#       http://www.gnu.org/licenses/gpl.html .
#   
#       In addition to the terms of the GPL license to be adhered to in using this
#       program, the following additional terms are to be complied with:
#   
#   	1) All versions of this program, verbatim or modified must carry this 
#   	   Legal Notice.
#   
#   	2) Any misrepresentation of the origin of the material is prohibited. It 
#   	   is required that all modified versions of this material be marked in 
#   	   reasonable ways as different from the original version.
#   
#   	3) This license does not grant any rights to any user of the program 
#   	   with regards to rights under trademark law for use of the trade names 
#   	   or trademarks of eGovernments Foundation.
#   
#     In case of any queries, you can reach eGovernments Foundation at contact@egovernments.org.
#-------------------------------------------------------------------------------
<!doctype html public "-//W3C//DTD HTML 4.0 Transitional//EN">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
<meta http-equiv="KEYWORDS" content="">
<meta http-equiv="DESCRIPTION" content="">
<!-- Inclusion of the CSS files that contains the styles -->
<link rel=stylesheet href="../exility/global.css" type="text/css">
<link rel="stylesheet" href="../css/lockRowHead.css" type="text/css" />
<SCRIPT LANGUAGE="javascript" SRC="../exility/PageManager.js"></SCRIPT>
<SCRIPT LANGUAGE="javascript" SRC="../exility/ExilityParameters.js"></SCRIPT>
<SCRIPT LANGUAGE="javascript" SRC="../exility/PageValidator.js"></SCRIPT>
<script language="javascript" src="../script/jsCommonMethods.js"></script>
<SCRIPT type="text/javascript" src="../script/calendar.js" type="text/javascript" ></SCRIPT>
<SCRIPT LANGUAGE="javascript">
var flag='0', tbNames, tbIds;
var rptType;
var accEntText='';
var rptTitle='', rptStartDate='', rptEndDate='', rptGLCode='', rptAccName='', detail='';
//onLoad

function onBodyLoad(){
	PageValidator.addCalendars();
	PageManager.ListService.callListService();
	PageManager.DataService.callDataService('cgNumber');
	rptType = PageManager.DataService.getQueryField('reportType');
	var rptObj = document.getElementById('reportType');
	rptObj.value = rptType;
	//document.getElementById('mainTable').rows[3].style.display = 'block';
	document.getElementById('mainTable').rows[5].style.display = 'block';
	switch (rptType) {
		case "jb":document.getElementById('screenName').innerHTML="Books of Accounts - Journal Book";break;
		case "bb":document.getElementById('screenName').innerHTML="Books of Accounts - Bank Book";break;
		case "cb":document.getElementById('screenName').innerHTML="Books of Accounts - Cash Book";break;
		case "gl":document.getElementById('screenName').innerHTML="Books of Accounts - General Ledger Report";break;
		case "bv":document.getElementById('screenName').innerHTML="Books of Accounts - Budget Variance";break;
		case "tb":document.getElementById('screenName').innerHTML="Books of Accounts - Trial Balance Report";break;
		case "sl":document.getElementById('screenName').innerHTML="Books of Accounts - Subledger Report";break;
	}


	changeRptType();

}

function ButtonPress(){
	//var type=document.getElementById('reportType');
	//var fnd = document.getElementById('fundName');
	var financialyear = document.getElementById('financialYear_id');
	var accEntity = document.getElementById('accEntityList');
	if(rptType !== "bb")
	{
	var accCode = document.getElementById('accCode');
	}
	var strtDate = document.getElementById('startDate').value;
	rptStartDate = strtDate;
	var endDate = document.getElementById('EndDate').value;
	rptEndDate = endDate;


	var dbDate=document.getElementById('databaseDate').value;
				if(compareDate(formatDateToDDMMYYYY1(endDate),formatDateToDDMMYYYY1(dbDate)) == -1 )
				{
				alert('End Date should be less than or equal to '+dbDate);
				document.getElementById('EndDate').focus();
				return false;
				}
	var ctrl = document.getElementById('bank_id');
	var bi = ctrl.options[ctrl.selectedIndex].value;
	var bai = document.getElementById('bankAccount_id').value;

	if( compareDate(formatDate6(strtDate),formatDate6(endDate)) == -1 ){
		alert('Start Date cannot be greater than End Date');
		document.getElementById('startDate').focus();
		return false;
	}
	var asDate = document.getElementById('asOnDate').value;
	//var rellText = document.getElementById('relText').value;
	//var rptType = type.options[type.selectedIndex].value;
	switch (rptType) {
		case "jb": break;
		case "bb":if(strtDate.length==0||endDate.length==0){
					alert("please select start dates and end dates");
					return;
				 	}
				 	if(bi.length==0||bai.length==0){
					alert("please select Bank and Account Number");
					return;
				 }
					break;
		case "cb":
		case "gl":if(accCode.value.length==0){
					alert("please select Account Code");
					return;
				 }
				 if(strtDate.length==0||endDate.length==0){
					alert("please select start dates and end dates");
					return;
				 }
				 break;
		case "bv":if(financialyear.selectedIndex==0){
					alert("please select Financial Year");
					return;
				 }
				 break;
		case "tb":if(asDate.length==0){
					alert("please select Date");
					return;
				 }
				 break;
		case "sl":	if(accCode.value.length==0){
					alert("please select Account Code");
					return;
					 }
					if(strtDate.length==0||endDate.length==0){
						alert("please select start dates and end dates");
						return;
					}
					if(accEntity.selectedIndex<0){
						alert('please select Accounting Entity');
						return;
					}
				 break;

		default:return;
	}

	if (!PageValidator.validateForm())
		return;
		PageManager.DataService.setQueryField('condition',2);
	/* if report is to be shown in HTML pages*/
	if(rptType == "gl" || rptType == "sl" || rptType == "bb" || rptType == "cb"){
	//if(rptType == "bb" || rptType == "cb"){
		//tb = ["NA", "Bank Account", "Ward", "Fund", "Department", "Region", "Region", "Financial Year", "Assets", "Relation", "Works Detail", "Bill Collector", "Month"]	;
		PageManager.DataService.setQueryField('rptType',rptType);
		if(rptType == "bb")
		{
			var ano=document.getElementById('bankAccount_id').value;
			PageManager.DataService.setQueryField('bankAccountID',ano);
			PageManager.DataService.setQueryField('condition',1);

		}
		else
		{
			PageManager.DataService.setQueryField('glCode', document.getElementById('accCode').value);
		}
		var stdate=document.getElementById('startDate').value;
		var edate=document.getElementById('EndDate').value;

		//PageManager.DataService.setQueryField('startDate', formatDate1(document.getElementById('startDate').value));
		PageManager.DataService.setQueryField('startDate', formatDate1(stdate));
		//PageManager.DataService.setQueryField('endDate', formatDate1(document.getElementById('EndDate').value));
		PageManager.DataService.setQueryField('endDate', formatDate1(edate));
		var fObj = document.getElementById('fund_id');
		var fsObj = document.getElementById('fundSource_id');
		if(fObj.selectedIndex>-1){
			PageManager.DataService.setQueryField('fund_id', fObj.options[fObj.selectedIndex].value);
		}

		if(fsObj.selectedIndex>-1){
			PageManager.DataService.setQueryField('fundSource_id', fsObj.options[fsObj.selectedIndex].value);
		}

		PageManager.DataService.setQueryField('entityId', document.getElementById('accEntityId').value);
		if(rptType == "sl"){
			var accEntityObj = document.getElementById('accEntityList');
			PageManager.DataService.setQueryField('entityKey',accEntityObj.options[accEntityObj.selectedIndex].value);
		}

		PageManager.DataService.callDataService('rptGeneralLedger');
		if(rptType == "sl")	{
		var accEntObj=document.getElementById('accEntityList');
			getDescription(accEntObj);
			 accEntText=document.getElementById('accEntityText').value;
			}


		//var accountEntity=accountEntityObj.options[accountEntityObj.selectedIndex].value
		//alert(rptGLCode + '-' + rptAccName + '-' + rptStartDate + '-' + rptEndDate + '-' + detail);
		if(detail != '') detail = '<br><br>' + detail;
		if(rptType == "gl")
			rptTitle = '<font size=3><b>General Ledger</b></font><br>' + rptAccName + '<br>' + rptStartDate + ' to ' + rptEndDate + detail;
		else if(rptType == "sl")
				rptTitle = '<font size=3><b>Sub Ledger -'+accEntText+'</b></font><br>'+ rptAccName +'<br>' + rptStartDate + ' to ' + rptEndDate + detail;
		else if(rptType == "cb")
			rptTitle = '<font size=3><b>Cash Book</b></font><br>' + rptAccName + '<br>' + rptStartDate + ' to ' + rptEndDate + detail;
	/*	else if(rptType == "bb")
			rptTitle = '<font size=3><b>Bank Book</b></font><br>' + rptAccName + '<br>' + rptStartDate + ' to ' + rptEndDate + detail;
		*/
		//document.getElementById('rptHeader').innerHTML = rptTitle;
		detail = '';
		rptTitle='';
	}
	else
		document.forms[0].submit();
}

function changeRptType() {
	clearFields();
	hideDetail();
	//var type=document.getElementById('reportType');
	//var rptType = type.options[type.selectedIndex].value;

	var rowGLCode = document.getElementById('mainTable').rows[2];
	var rowFundSource = document.getElementById('mainTable').rows[3];
	var rowBank = document.getElementById('mainTable').rows[4];
	var rowDate = document.getElementById('mainTable').rows[5];
	var rowFundAsDate = document.getElementById('mainTable').rows[6];
	var rowFundSource2 = document.getElementById('mainTable').rows[7];
	var rowEntity = document.getElementById('mainTable').rows[8];
	var rowFY = document.getElementById('mainTable').rows[9];
	var rowFund = document.getElementById('mainTable').rows[10];



	rowGLCode.style.display="none";
	rowDate.style.display="none";
	rowFundAsDate.style.display="none";
	rowEntity.style.display="none";
	rowFY.style.display="none";
	rowFund.style.display="none";
	rowFundSource.style.display="none";
	rowBank.style.display="none";

	var trFund = document.getElementById('trFund_id');
	trFund.style.display="none";

	var trFundSource = document.getElementById('trFundSource_id');
	trFundSource.style.display="none";

	var jbFund = document.getElementById('jbFund_id');
	jbFund.style.display="none";

    var jbFundSource = document.getElementById('jbFundSource_id');
	jbFundSource.style.display="none";

	switch (rptType) {
		case "bb":rowBank.style.display="block";
					rowDate.style.display="block";
					break;
		case "jb":
				jbFund.style.display="block";
				jbFundSource.style.display="block";
				rowDate.style.display="block";
				rowFund.style.display="block";
				break;
		case "cb":
		case "gl":rowGLCode.style.display="block";
		          rowFundSource.style.display="block";
				  rowDate.style.display="block";
				 break;
		case "bv":rowFY.style.display="block";
		          break;
		case "tb":
				trFund.style.display="block";
				rowFundAsDate.style.display="block";
				rowFundSource2.style.display="block";
				trFundSource.style.display="block";
				break;
		case "sl":
				 rowGLCode.style.display="block";
				 rowFundSource.style.display="block";
				 rowDate.style.display="block";
				 rowEntity.style.display="block";
				 break;
	}
}

function openSearch(obj,index){
	 var a = new Array(2);
	 //var type=document.getElementById('reportType');
	//	var rptType = type.options[type.selectedIndex].value;
		var screenName="report";
		var str="";
		;
		if (obj.toLowerCase() == 'relation')
			str = "Search.html?tableNameForCode="+obj;
		else if(obj.toLowerCase() == 'chartofaccounts'){
			if (rptType == "cb"){
				//screenName="cashBook";
				screenName="4";
				str = "Search.html?cashCode="+screenName;
			}
			else if(rptType == "bb"){
				//screenName="bankBook";
				screenName="13";
				str = "Search.html?filterServiceID="+screenName;
			}else if(rptType == "sl"){
				str = "Search.html?tableNameForCode=chartofaccounts_controlcodes";
			}else{
				str = "Search.html?screenName="+screenName;
			}
		}
	 var sRtn = showModalDialog(str,"","dialogLeft=300;dialogTop=210;dialogWidth=305pt;dialogHeight=300pt;status=no;");
    if (index==1){
		a = sRtn.split("`~`");
		var type = document.getElementById('accCode');
		type.value = a[0];
		rptGLCode = a[0];
		rptAccName = a[1];
		document.getElementById('chartOfAccounts_id').value = a[2];
		//getDetailData(a[0]);
	}else{
		//a = sRtn.split("`~`");
		//document.getElementById('relTypeId').value=a[2];
		//document.getElementById('relText').value=a[1];
	}
	if(rptType == "sl" && a[2]!=null && a[2]!=''){
		var glCodeId = document.getElementById('chartOfAccounts_id').value;
		if(glCodeId != ''){
			PageManager.DataService.setQueryField('glCodeId', glCodeId);
			PageManager.DataService.callDataService('accEntityList');
		}
	}
}

function getAccountNumbers()
			{
				var ctrl = document.getElementById('bank_id');
				var branchid = ctrl.options[ctrl.selectedIndex].value;
				var a = Array(2);
				a = branchid.split('-');
				branchid = a[1];

				var obj = document.getElementById('bankAccount_id');
				obj.setAttribute('exilListSource','accountList');

				PageManager.DataService.setQueryField('branchId',branchid);
				PageManager.DataService.callDataService('accNumber');
			}

function beforeRefreshPage(dc){

	var accName = dc.values['accName'];
	if(accName != null && accName != '')
		rptAccName = dc.values['accName'];

	PageManager.DataService.removeQueryField('glCode');

	/*var gridData = dc.grids['gridBookDetail'];
	if(gridData==null) gridData = dc.grids['gridGLDetail'];

	if(gridData != null){
		for(var i=1; i<gridData.length; i++){
			if(gridData[i][0]!=''){
				alert(gridData[i][0]);
				//gridData[i][0] = formatDate(gridData[i][0]);
			}

				//var detail='';
				//for(var j=0; j<gridData[i][3].split(';').length; j++)
				//	detail = detail + '\n' + gridData[i][3].split(';')[j];
				//gridData[i][3] = detail;

		}
	}*/
}
function afterRefreshPage(dc)
{
		if(dc.values['serviceID']=='rptGeneralLedger'){

			var startDate=document.getElementById('startDate').value;
			var EndDate=document.getElementById('EndDate').value;
			if(startDate && startDate.length!=0)
					{
					var startDate=dc.values['startDate'];
					//alert("VouDateFrom"+formatDateToDDMMYYYY5(VouDateFrom)+" VouDateTo"+formatDateToDDMMYYYY5(VouDateTo));
					startDate=formatDateToDDMMYYYY5(startDate);
					document.getElementById('startDate').value=startDate;
					}

				if(EndDate && EndDate.length!=0)
				{
					var EndDate=dc.values['endDate'];
					EndDate=formatDateToDDMMYYYY5(EndDate);
					document.getElementById('EndDate').value=EndDate;
				}

			}

	if(dc.values['serviceID']=='getAccCOAID'){
			var glCodeId = document.getElementById('chartOfAccounts_id').value;
			if(glCodeId != ''){
				clearCombo(document.getElementById('accEntityList'));
				PageManager.DataService.setQueryField('glCodeId', glCodeId);
				PageManager.DataService.callDataService('accEntityList');
			}
	}
	if(dc.values['reportCodeFailed']){
		alert(dc.values['reportCodeFailed']);
	}
	PageManager.DataService.removeQueryField('startDate');
	PageManager.DataService.removeQueryField('endDate');
	rptAccName = dc.values['accName'];

	var ulbName='';
	if(dc.values['ULBName'] != null) ulbName='<font size=4><b>' + dc.values['ULBName'];
	document.getElementById('rptHeader').innerHTML = ulbName + '</b></font><br>' + document.getElementById('rptHeader').innerHTML;

	var gridData = dc.grids['gridGLDetail'];
	if(gridData!=null) displayGLDetail();
	else{
		gridData = dc.grids['gridBookDetail'];
		if(gridData!=null) displayBookDetail();
	}
	if(gridData != null && gridData.length >= 1){
		var tr12 = document.getElementById('mainTable').rows[14];
		var tr16 = document.getElementById('mainTable').rows[18];
		if(dc.values['opDr'] == ' ' && dc.values['opCr'] == ' ')
			tr12.style.display='none';
		if(dc.values['tDr'] == ' ' && dc.values['tCr'] == ' ')
			tr16.style.display='none';
	}
	/* to fill the accEntity Combo*/
	var accEntityList = dc.grids['accEntityList'];
	if(accEntityList != null){
		document.getElementById('accEntityId').value = dc.values['accEntityId'];
		var comboAccEntity = document.getElementById('accEntityList');
		clearCombo(comboAccEntity);
		var option;
		/*option = document.createElement('OPTION');
		option.value='0';
		option.text = ' ';
		accEntity.add(option);		*/
		for(var i=1; i<accEntityList.length; i++){
			option = document.createElement('OPTION');
			option.value=accEntityList[i][0];
			option.text = accEntityList[i][1];
			comboAccEntity.add(option);
		}
	}
	var bankName=document.getElementById('bank_id');
	var bankAccountId=document.getElementById('bankAccount_id');
	if(rptType == "bb"){
	rptAccName=bankName.options[bankName.selectedIndex].innerHTML;
	//rptAccName=rptAccName + ' ' +bankAccountId.options[bankAccountId.selectedIndex].innerHTML;
	}

if(dc.values['isConfirmedCount'] >= 0 && dc.values['totalCount'] >=0) {
	if(rptType == "bb")
		rptTitle = '<font size=3><b>Bank Book</b></font><br>' + rptAccName + '<br>' + rptStartDate + ' to ' + rptEndDate + '<br><div align="left">' +dc.values['isConfirmedCount'] + ' in ' +dc.values['totalCount']+ ' are unconfirmed ';
	else if(rptType == "gl")
		rptTitle = '<font size=3><b>General Ledger</b></font><br>' + rptAccName + '<br>' + rptStartDate + ' to ' + rptEndDate + detail;
	else if(rptType == "sl")
		rptTitle = '<font size=3><b>Sub Ledger -'+accEntText+'</b></font><br>'+ rptAccName +'<br>' + rptStartDate + ' to ' + rptEndDate + '<br><div align="left">' +dc.values['isConfirmedCount'] + ' in ' +dc.values['totalCount']+ ' are unconfirmed ';
	else if(rptType == "cb")
		rptTitle = '<font size=3><b>Cash Book</b></font><br>' + rptAccName + '<br>' + rptStartDate + ' to ' + rptEndDate + '<br><div align="left">' +dc.values['isConfirmedCount'] + ' in ' +dc.values['totalCount']+ ' are unconfirmed ';
	document.getElementById('rptHeader').innerHTML = rptTitle;
}
else{
	if(rptType == "bb")
		rptTitle = '<font size=3><b>Bank Book</b></font><br>' + rptAccName + '<br>' + rptStartDate + ' to ' + rptEndDate + detail;
	else if(rptType == "gl")
		rptTitle = '<font size=3><b>General Ledger</b></font><br>' + rptAccName + '<br>' + rptStartDate + ' to ' + rptEndDate + detail;
	else if(rptType == "sl")
		rptTitle = '<font size=3><b>Sub Ledger -'+accEntText+'</b></font><br>'+ rptAccName +'<br>' + rptStartDate + ' to ' + rptEndDate + detail;
	else if(rptType == "cb")
		rptTitle = '<font size=3><b>Cash Book</b></font><br>' + rptAccName + '<br>' + rptStartDate + ' to ' + rptEndDate + detail;
	document.getElementById('rptHeader').innerHTML = rptTitle;
}
}
function clearCombo(obj){
	for(var i=obj.length-1;i>=0;i--)
		obj.remove(i);
}
function displayGLDetail(){
	var rowHeader = document.getElementById('mainTable').rows[13];
	var rowOpBal = document.getElementById('mainTable').rows[14];
	var rowGLDetail = document.getElementById('mainTable').rows[15];
	var rowBookDetail = document.getElementById('mainTable').rows[16];
	var rowClBal = document.getElementById('mainTable').rows[17];
	var rowTotal = document.getElementById('mainTable').rows[18];
	rowHeader.style.display='block';
	rowOpBal.style.display='block';
	rowGLDetail.style.display='block';
	rowBookDetail.style.display='none';
	rowClBal.style.display='block';
	rowTotal.style.display='block';
}
function displayBookDetail(){
	var rowHeader = document.getElementById('mainTable').rows[13];
	var rowOpBal = document.getElementById('mainTable').rows[14];
	var rowGLDetail = document.getElementById('mainTable').rows[15];
	var rowBookDetail = document.getElementById('mainTable').rows[16];
	var rowClBal = document.getElementById('mainTable').rows[17];
	var rowTotal = document.getElementById('mainTable').rows[18];
	rowHeader.style.display='block';
	rowOpBal.style.display='block';
	rowGLDetail.style.display='none';
	rowBookDetail.style.display='block';
	rowClBal.style.display='block';
	rowTotal.style.display='block';
}
function hideDetail(){
	var rowHeader = document.getElementById('mainTable').rows[13];
	var rowOpBal = document.getElementById('mainTable').rows[14];
	var rowGLDetail = document.getElementById('mainTable').rows[15];
	var rowBookDetail = document.getElementById('mainTable').rows[16];
	var rowClBal = document.getElementById('mainTable').rows[17];
	var rowTotal = document.getElementById('mainTable').rows[18];
	rowHeader.style.display='none';
	rowOpBal.style.display='none';
	rowGLDetail.style.display='none';
	rowBookDetail.style.display='none';
	rowClBal.style.display='none';
	rowTotal.style.display='none';
}
function clearFields(){
	document.getElementById('accCode').value = '';
	document.getElementById('startDate').value = '';
	document.getElementById('EndDate').value = '';
	document.getElementById('asOnDate').value = '';
	//document.getElementById('relText').value = '';
	//document.getElementById('relTypeId').value = '';
}
function getAccountName(obj){
	if(obj.value != '')	{
		PageManager.DataService.setQueryField('glCode', obj.value);
		PageManager.DataService.callDataService('getAccName');
		PageManager.DataService.callDataService('getAccCOAID');
	}
}
function getDescription(obj)
{
	if(document.getElementById('accEntityId').value!='')
	{
		document.forms[0].accEntityText.value=obj.options[obj.selectedIndex].text;
	}
}

</SCRIPT>
</head>
<body bgcolor="#ffffff" bottommargin="0" topmargin="0" rightmargin="0" leftmargin="0" marginheight="0" marginwidth="0" onload="onBodyLoad()"><!------------------ Header Begins Begins--------------------->
<form name="journalVoucher" action="../JournalBook.jsp">
<input type="hidden" name="databaseDate"  id="databaseDate">
<input type=hidden id=reportType name=reportType>
<div class="tblHTM-container" id="tbl-container">
	<table width="100%" border=0 cellpadding="3" cellspacing="0" id="mainTable">
	<!-- row-0 -->
		<tr>
			<td class="rowheader" valign="center" width="100%" colspan="4"><span id="screenName" class="headerwhite2">Books of Accounts</span><span id="partyName" class="headerwhite2"></span></td>
		</tr>
	<!-- row-1 -->
		<tr class="row1" >
		<!--	<td width="25%"><div>&nbsp;</div></td>
			<td width="50%" colspan="2" align="middle"><div class="normaltext">Report Type &nbsp;
				<select class="fieldinput" name="reportType" id="reportType" onchange="changeRptType();">
				<OPTION value="tb"  selected>Trial Balance</OPTION>
				<OPTION value="gl">General Ledger</OPTION>
				<OPTION value="jb">Journal Book</OPTION>
				<OPTION value="bb">Bank Book</OPTION>
				<OPTION value="cb">Cash Book</OPTION>
				<OPTION value="sl">SubLedger</OPTION>
				<OPTION value="bv">Budget Variance</OPTION>
				</select></div>
			</td>
			<td width="25%"></td>      -->
   		</tr>
   	<!-- row-2 -->
		<tr class="row1" style="DISPLAY: none">
			<td><div align="right" valign="center" class="normaltext" >Account Code</div></td>
			<td>
				<input type="hidden" name="chartOfAccounts_id" id="chartOfAccounts_id">
				<input class="fieldinput" name="accCode" id="accCode" onBlur="getAccountName(this)"><IMG id=IMG1 onclick="openSearch('chartofaccounts',1);" height=22 src="/egi/resources/erp2/images/plus1.gif" width=25 align=top border=0>
			</td>
			<td><div align="right" valign="center" class="normaltext">Fund</div></td>
			<td align="left">
				<SELECT class="fieldinput" id=fund_id name="fund_id" exilListSource="fundNameList"></SELECT>
			</td>
		</tr>
	<!-- row-3 -->
		<tr class="row2" style="DISPLAY: none">
		<td><div align="right" valign="center" class="normaltext">Financing Source</div></td>
			<td align="left">
				<SELECT class="fieldinput" id=fundSource_id name="fundSource_id" exilListSource="fundSourceNameList"></SELECT>
			</td>
			<td></td>
			<td></td>

		</tr>
		<!-- row-4 -->
				<tr class="row1" style="DISPLAY: none">
				<td><div align="right" valign="center" class="normaltext"> Bank<span class="leadon">*</span></div></td>
				<td>
					<select  name="bank_id" id="bank_id" class="combowidth1" onChange="getAccountNumbers()" exilListSource="bankAndBranch"></select>
				</td>
		        <td><div  align="right" valign="center" class="normaltext">Account Number<span class="leadon">*</span></div></td>
				<td>
					<SELECT name="bankAccount_id" id="bankAccount_id" class="fieldinput"></SELECT>
				</td>
		</tr>
	<!-- row-5 -->

		<tr class="row1" style="DISPLAY: none">
			<td><div align="right" valign="center" class="normaltext">Starting Date</div></td>
			<td align="left">
				<input name="startDate" id="startDate" class="datefieldinput" onkeyup="DateFormat(this,this.value,event,false,'3')" exilDataType="exilAnyDate" exilCalendar="true">
			</td>
			<td><div align="right" valign="center" class="normaltext" >End Date</div></td>
			<td>
				<input name="EndDate" id="EndDate" class="datefieldinput" onkeyup="DateFormat(this,this.value,event,false,'3')" exilDataType="exilAnyDate" exilCalendar="true">
			</td>

		</tr>
	<!-- row-6 -->
		<tr class="row1" style="DISPLAY: none">
			<td><div align="right" valign="center" class="normaltext">Fund</div></td>
			<td align="left">
				<SELECT class="fieldinput" id=trFund_id name="trFund_id" style="DISPLAY: block" exilListSource="fundNameList"></SELECT>
			</td>
			<td><div align="right" valign="center" class="normaltext" >As On Date</div></td>
			<td>
				<input name="asOnDate" id="asOnDate" class="datefieldinput" onkeyup="DateFormat(this,this.value,event,false,'3')" exilDataType="exilAnyDate" exilCalendar="true">
			</td>

		</tr>
	<!-- row-7 -->
		<tr class="row2" style="DISPLAY: none">
			<td><div align="right" valign="center" class="normaltext">Financing Source</div></td>
			<td align="left">
				<SELECT class="fieldinput" id=trFundSource_id name="trFundSource_id" style="DISPLAY: block" exilListSource="fundSourceNameList"></SELECT>
			</td>
			<td></td>
			<td></td>

		</tr>
	<!-- row-8 -->
		<tr class="row2" style="DISPLAY: none">
			<td class="normaltext" align=right>Entity Detail</td>
			<td align="left"><input type="hidden" name="accEntityId" id="accEntityId">
			<input class="fieldinput" type="hidden" name="accEntityText" id="accEntityText">
			<select class="fieldinput" name="accEntityList" id="accEntityList" onChange="getDescription(this)" ></select>
			</td>
			<td></td>
			<td></td>
		</tr>
	<!-- row-9-->
		<tr class="row1" style="DISPLAY: none">
			<td><div>&nbsp;</div></td>
			<td colspan="2" align="middle"><div class="normaltext">Financial Year
				<select class="fieldinput" name="financialYear_id" id="financialYear_id" exilListSource="financialYearList"></select></div>
			</td>
			<td><div align="right" valign="center" class="normaltext" >&nbsp;</div></td></TD>

		</tr>
	<!-- row-10 -->
		<tr class="row2" style="DISPLAY: none">
			<td><div align="right" valign="center" class="normaltext">Fund</div></td>
			<td align="left">
				<SELECT class="fieldinput" id=jbFund_id name="jbFund_id" style="DISPLAY: none" exilListSource="fundNameList"></SELECT>
			</td>

			<td><div align="right" valign="center" class="normaltext">Financing Source</div></td>
			<td align="left">
				<SELECT class="fieldinput" id=jbFundSource_id name="jbFundSource_id" style="DISPLAY: none" exilListSource="fundSourceNameList"></SELECT>
			</td>
			<td></td>
			<td></td>

		</tr>
	<!------------------ Detail Table for GL ------------------>
	<!-- row-11 -->
		<tr class="row2">
			<td colspan=4>
			</td>
		</tr><!------------------ Detail Table for GL ------------------>
	<!-- row-12 -->
		<tr class="row2">
			<td colspan="4" align="middle"><!-- Buttons Start Here -->
				<table border="0" cellpadding="0" cellspacing="0">
					<tr>
						<td align="right">
							<IMG height=18 src="/egi/resources/erp2/images/Button_leftside.gif" width=7></td>
						<td bgcolor="#fe0000" valign="center" nowrap><A class=buttonprimary onclick=ButtonPress() href="#">Search</A></td>
						<td>
							<IMG height=18 src="/egi/resources/erp2/images/Button_rightside.gif" width=7></td>
					</tr>
				</table><!-- Buttons Ends Here -->
			</td>
		</tr><!------------------ General Ledger Data ------------------><!--
		<tr class="row2">
			<td colspan=4 >
				<table width="80%" align=center border="1" cellpadding="0" cellspacing="0" id="gridDetail" name="gridDetail">
					<tr>
						<td><div id="temp" name="temp">&nbsp;</div></td>
					</tr>
					<tr>
						<td><div id="temp" name="temp">&nbsp;</div></td>
					</tr>
				</table>
			</td>
		</tr>
		-->
	<!-- row-13 -->
		<tr class="row2" style="DISPLAY: none">
			<td colspan=4>
				<table width="100%" align=center border="0" cellpadding="0" cellspacing="0" id='hdrRow' name="hdrRow">
					<tr class="row1" height="25">
          <TD width="95%" ?>
            <DIV class=displaydata id=rptHeader align=center
            name="rptHeader">&nbsp;</DIV></TD></tr>
				</table>
			</td>
		</tr>
	<!-- row-14 -->
        <TR class=row2 style="DISPLAY: none">
          <TD colSpan=4>
				<table width="100%" align=center border="0" cellpadding="0" cellspacing="0"	id=TABLE1 >
					<tr class="row1" height="25">
						<td width="72%" align="left" class="normaltext">Opening Balance</td>
						<td width="14%" align="right"><div class="normaltext" name="opDr" id="opDr">&nbsp;</div></td>
						<td width="14%" align="right"><div class="normaltext" name="opCr" id="opCr">&nbsp;</div></td>
					</tr>
				</table>
		  </TD>
		</TR>
	<!-- row-15 -->
		<tr class="row2" style="DISPLAY: none">
			<td colspan=4>
				<table width="100%" align=center border="1" cellpadding="0" cellspacing="0" id="gridGLDetail" name="gridGLDetail">
				  <thead>
					<tr class="rowheader">
						<th width="16%" class="columnheader" align="middle">Voucher No.</th>
						<th width="20%" class="columnheader" align="middle">Voucher Date</th><!--<td width="9%" class="columnheader" align="middle">Acc Code</td>--><!--<td width="33%" class="columnheader" align="middle">Acc Name / Detail</td>-->
						<th width="20%" class="columnheader" align="middle">Narration</th>
						<th width="20%" class="columnheader" align="middle">Transaction</th>
						<th width="12%" class="columnheader" align="middle">Debit</th>
						<th width="12%" class="columnheader" align="middle">Credit</th>
					</tr>
					</thead>
					<tr class="row1">
						<td valign="top"><div class="normaltext" name="vouchernumber" id="vouchernumber"></div>&nbsp;</td>
						<td valign="top"><div class="normaltext" name="voucherdate" id="voucherdate"></div>&nbsp;</td><!--<td valign="top"><div class="normaltext" name="glcode" id="glcode"></div>&nbsp;</td>--><!--<td valign="top"><span class="normaltext" name="name" id="name"></span>&nbsp;</td>-->
						<td valign="top"><div class="normaltext" name="narration" id="narration"></div>&nbsp;</td>
						<td valign="top"><div class="normaltext" name="type" id="type"></div>&nbsp;</td>
						<td valign="top"><div class="normaltext" name="debitamount" id="debitamount" align="right"></div>&nbsp;</td>
						<td valign="top"><div class="normaltext" name="creditamount" id="creditamount" align="right"></div>&nbsp;</td>
					</tr>
				</table>
			</td>
		</tr>
	<!-- row-16 -->
		<tr class="row2" style="DISPLAY: none">
			<td colspan=4>
				<table width="100%" align=center border="1" cellpadding="0" cellspacing="0" id="gridBookDetail" name="gridBookDetail">
				<thead>
					<tr class="rowheader">
						<th width="13%" class="columnheader" align="middle">Voucher No.</td>
						<th width="13%" class="columnheader" align="middle">Voucher Date</td><!--<td width="9%" class="columnheader" align="middle">Acc Code</td>-->
						<th width="30%" class="columnheader" align="middle">Particulars</td>
						<th width="12%" class="columnheader" align="middle">Amount</td>
						<th width="10%" class="columnheader" align="middle">Narration</td>
						<th width="10%" class="columnheader" align="middle">Transaction</td>
						<th width="12%" class="columnheader" align="middle">Debit</td>
						<th width="12%" class="columnheader" align="middle">Credit</td>
					</tr>
				   </thead>
					<tr class="row1">
						<td valign="top"><div class="normaltext" name="vouchernumber" id="vouchernumber"></div>&nbsp;</td>
						<td valign="top"><div class="normaltext" name="voucherdate" id="voucherdate"></div>&nbsp;</td><!--<td valign="top"><div class="normaltext" name="glcode" id="glcode"></div>&nbsp;</td>-->
						<td valign="top"><span class="normaltext" name="name" id="name"></span>&nbsp;</td>
						<td valign="middle"><div class="normaltext" name="amount" id="amount" align="right"></div><!--<span class="normaltext" name="amount" id="amount" align="right"></span>-->&nbsp;</td>
						<td valign="top"><div class="normaltext" name="narration" id="narration"></div>&nbsp;</td>
						<td valign="top"><div class="normaltext" name="type" id="type"></div>&nbsp;</td>
						<td valign="top"><div class="normaltext" name="debitamount" id="debitamount" align="right"></div>&nbsp;</td>
						<td valign="top"><div class="normaltext" name="creditamount" id="creditamount" align="right"></div>&nbsp;</td>
					</tr>
				</table>
			</td>
		</tr>
	<!-- row-17 -->
		<tr class="row2" style="DISPLAY: none">
			<td colspan=4>
				<table width="100%" align=center border="0" cellpadding="4" cellspacing="0" id=TABLE1>
					<tr class="row2">
						<td width="72%" align="left" class="normaltext">Closing&nbsp;Balance</td>
						<td width="14%" align="right"><div class="normaltext" name="clDr" id="clDr"></div></td>
						<td width="14%" align="right"><div class="normaltext" name="clCr" id="clCr"></div></td>
					</tr>
					<tr class="row2">
						<td colspan=3 width="100%" align="right"><HR width="30%" id=HR1></td>
					</tr>
				</table>
			</td>
		</tr>
	<!-- row-18 -->
		<tr class="row2" style="DISPLAY: none">
			<td colspan=4>
				<table width="100%" align=center border="0" cellpadding="4" cellspacing="0" id=TABLE1>
					<tr class="row1">
						<td width="72%" align="left" class="normaltext">Total</td>
						<td width="14%" align="right"><div class="normaltext" name="tDr" id="tDr"></div></td>
						<td width="14%" align="right"><div class="normaltext" name="tCr" id="tCr"></div></td>
					</tr>
					<tr class="row1">
						<td colspan=3 width="100%" align="right"><HR width="30%" id=HR1></td>
					</tr>
				</table>
			</td>
		</tr>

		<!------------------ General Ledger Data ------------------>
	</table>
	</div>
</form>
</body>
</html>
