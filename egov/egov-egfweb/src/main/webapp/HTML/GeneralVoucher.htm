#-------------------------------------------------------------------------------
# eGov suite of products aim to improve the internal efficiency,transparency, 
#      accountability and the service delivery of the government  organizations.
#   
#       Copyright (C) <2015>  eGovernments Foundation
#   
#       The updated version of eGov suite of products as by eGovernments Foundation 
#       is available at http://www.egovernments.org
#   
#       This program is free software: you can redistribute it and/or modify
#       it under the terms of the GNU General Public License as published by
#       the Free Software Foundation, either version 3 of the License, or
#       any later version.
#   
#       This program is distributed in the hope that it will be useful,
#       but WITHOUT ANY WARRANTY; without even the implied warranty of
#       MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
#       GNU General Public License for more details.
#   
#       You should have received a copy of the GNU General Public License
#       along with this program. If not, see http://www.gnu.org/licenses/ or 
#       http://www.gnu.org/licenses/gpl.html .
#   
#       In addition to the terms of the GPL license to be adhered to in using this
#       program, the following additional terms are to be complied with:
#   
#   	1) All versions of this program, verbatim or modified must carry this 
#   	   Legal Notice.
#   
#   	2) Any misrepresentation of the origin of the material is prohibited. It 
#   	   is required that all modified versions of this material be marked in 
#   	   reasonable ways as different from the original version.
#   
#   	3) This license does not grant any rights to any user of the program 
#   	   with regards to rights under trademark law for use of the trade names 
#   	   or trademarks of eGovernments Foundation.
#   
#     In case of any queries, you can reach eGovernments Foundation at contact@egovernments.org.
#-------------------------------------------------------------------------------
<!doctype html public "-//W3C//DTD HTML 4.0 Transitional//EN">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
<meta http-equiv="KEYWORDS" content="">
<meta http-equiv="DESCRIPTION" content="">
<!-- Inclusion of the CSS files that contains the styles -->
<link rel=stylesheet href="../exility/global.css" type="text/css">
<SCRIPT LANGUAGE="javascript" SRC="../exility/datefunctions.js"></SCRIPT>
		<SCRIPT LANGUAGE="javascript" SRC="../exility/PageValidator.js"></SCRIPT>
		<SCRIPT LANGUAGE="javascript" SRC="../exility/PageManager.js"></SCRIPT>
		<SCRIPT LANGUAGE="javascript" SRC="../exility/CookieManager.js"></SCRIPT>
		<SCRIPT LANGUAGE="javascript" SRC="../exility/ExilityParameters.js"></SCRIPT>
		<script SRC="../script/JV_GeneralFunc.js.htm"></SCRIPT>
		<script language="javascript" src="../script/jsCommonMethods.js"></script>
	    <script LANGUAGE="javascript" src="../exility/data.js"></script>
	    <SCRIPT LANGUAGE="javascript" SRC="../script/rowDetails.js"></script>
	    <SCRIPT type="text/javascript" src="../script/calendar.js" type="text/javascript" ></SCRIPT>
<script language="javascript">
var str="";
var isDrillDown=false;
function onloadTasks(){
			document.getElementById('reverseSubmit').style.display ="none";
			 PageValidator.addCalendars();
			 PageManager.ListService.callListService();
			 var cgn=PageManager.DataService.getQueryField('cgNumber');
		 	 var sm=PageManager.DataService.getQueryField('showMode');

	 		 if(sm=="new"){
	 		 	document.getElementById('createdInfo').style.display ="none";
				document.getElementById('statusLabel').style.display ="none";
				document.getElementById('statusText').style.display ="none";
				document.getElementById('backbutton').style.display="none";
	 		 }
	 		 else if(cgn && (sm=="modify")){
		 	    isDrillDown=true;
				PageManager.DataService.setQueryField('cgNumber',cgn);
				PageManager.DataService.callDataService('getGeneralDetails');
				PageManager.DataService.callDataService('jvGeneralList');
				document.getElementById('modGrid').style.display='block';
				document.getElementById('voucherHeader_voucherNumber').setAttribute('exilDataType','exilAlphaNumeric');
				document.getElementById('submitGrid').style.display ="none";
					document.getElementById('cgnLabel').style.display='block';
					document.getElementById('backbutton').style.display="none";
				disableControls(0,true);
		 	 }
		 	 else if(cgn && (sm=="view")){
				isDrillDown=true;
				PageManager.DataService.setQueryField('cgNumber',cgn);
				PageManager.DataService.callDataService('getGeneralDetails');
				PageManager.DataService.callDataService('jvGeneralList');
				document.getElementById('modGrid').style.display='none';
				document.getElementById('submitGrid').style.display ="none";
					document.getElementById('cgnLabel').style.display='block';
					document.getElementById('backbutton').style.display='block';
				disableControls(0,true);
		 	 }
		 	 else if(cgn && (sm=="edit")){
				isDrillDown=true;
				PageManager.DataService.setQueryField('cgNumber',cgn);
					document.getElementById('voucherHeader_voucherNumber').setAttribute('exilDataType','exilAlphaNumeric');
				PageManager.DataService.callDataService('getGeneralDetails');
				PageManager.DataService.callDataService('jvGeneralList');
				document.getElementById('modGrid').style.display='none';
				document.getElementById('submitGrid').style.display ="none";
				document.getElementById('saveandnewb').style.display ="none";
				document.getElementById('saveandnewlb').style.display ="none";
				document.getElementById('saveandnewrb').style.display ="none";
				document.getElementById('backbutton').style.display="none";
				document.getElementById('cgnLabel').style.display='block';
				//disableControls(0,true);
				edit();
		 	 }
		 	 if(!cgn){
				 PageManager.DataService.callDataService('cgNumber');
				 PageManager.DataService.callDataService('coaDetails');
				 PageManager.DataService.addNewRow('JV_GeneralGrid');
				// document.JV_General.voucherHeader_voucherNumber.focus();
				  obj=document.getElementById('modGrid').style.display="none";
				  document.getElementById('backbutton').style.display="none";
			 }
		 }

function colTotal(obj,target){
	      var a = document.getElementsByName(obj.name);
 	      count = 0;
 	      for(var i = 0; i<=a.length-1;i++) if(a[i].value)
 		  count += parseFloat(a[i].value);
	      document.getElementById(target).value = count;
       }

function openSearch(obj){
		 var a = new Array(2);
         //var sRtn = showModalDialog("Search.html?screenName=generalJV","","dialogLeft=300;dialogTop=210;dialogWidth=305pt;dialogHeight=300pt;status=no;");
         var sRtn =showModalDialog("Search.html?filterServiceID=6","","dialogLeft=300;dialogTop=210;dialogWidth=305pt;dialogHeight=300pt;status=no;");
         if ( sRtn != '' )
	       {
			 a = sRtn.split(",");

			  var x = PageManager.DataService.getControlInBranch(obj.parentNode,'chartOfAccounts_glCode');
			  x.value = a[0];
			  var y = PageManager.DataService.getControlInBranch(obj.parentNode.parentNode,'chartOfAccounts_name');
			  y.value = a[1];

		   }
         }

function ButtonPress(name)
{
	var isHeaderNarrationDisabled=document.forms[0].voucherHeader_description.disabled;

	if(name.toLowerCase()=='savenew')
		str="new";
	else if(name.toLowerCase()=='saveclose')
		str="close";
	if(isHeaderNarrationDisabled)
	{
		var cgn=PageManager.DataService.getQueryField('cgNumber');
		if(cgn)
		{
			 disableControls(0,false);
		}
		else
		{
			if(!checkNarration('voucherHeader_description'))
			return false;
			if(!PageValidator.validateForm())
			return false;
    		if(!validate())
			return false;
			disableControls(0,false);
		}

		PageManager.UpdateService.submitForm('GeneralVoucher');
	}
	else
	{
		disableControls(0,false);
		//alert('HI - 1');//TBR
		PageManager.UpdateService.submitForm('GeneralVoucher');
		//alert('HI - 12');//TBR
	}
}

function validate(){
			var i, j, debit=0, credit=0,creditTotal=0,debitTotal=0;
			table = document.getElementById('JV_GeneralGrid');
			for(i=1; i<table.rows.length; i++){
				/* checking for duplicate account codes */
				for(j=1; j<table.rows.length; j++){
					if((i != j)
							&& document.JV_General.chartOfAccounts_glCode[i-1].value != ''
							&& document.JV_General.chartOfAccounts_glCode[i-1].value == document.JV_General.chartOfAccounts_glCode[j-1].value){
							if(!checkEntityDuplication(i,j))continue;
							alert('same account can not appear more than once...CHECK ACCOUNT : ' + document.JV_General.chartOfAccounts_glCode[i-1].value);
							return false;
					}
				}


				debit = eval(document.JV_General.voucherDetail_debitAmount[i-1].value);
				credit = eval(document.JV_General.voucherDetail_creditAmount[i-1].value);
				debit = isNaN(debit)?0:debit;
				credit = isNaN(credit)?0:credit;
				debitTotal = debitTotal + debit;
				creditTotal = creditTotal + credit;

				if((credit>0 || debit>0) &&  document.JV_General.chartOfAccounts_glCode[i-1].value.length == 0){
					document.JV_General.chartOfAccounts_glCode[i-1].focus();
					alert('account code is missing for credit/debit supplied field');
					return false;
				}

				if(debit > 0 && credit > 0){
						document.JV_General.voucherDetail_debitAmount[i-1].focus();
					alert('one account can have only credit or debit...CHECK ACCOUNT : ' + document.JV_General.chartOfAccounts_glCode[i-1].value);
					return false;
				}


				if(debit==0 && credit == 0 && document.JV_General.chartOfAccounts_glCode[i-1].value.length!= 0){
					document.JV_General.voucherDetail_debitAmount[i-1].focus();
					alert('enter debit/credit amount for the account code ' + document.JV_General.chartOfAccounts_glCode[i-1].value);
					return false;
				}

			}
			if(creditTotal != debitTotal){
				alert('total credit and total debit amount must be same');
				return false;
			}


			if(creditTotal<=0){
				alert('no transaction with no credit/debit');
				return false;
			}

			return true;
		}


function beforeRefreshPage(dc) {

	if(!isNaN(parseInt(dc.values['voucherHeader_cgn'])))
		dc.values['voucherHeader_cgn'] = 'JVG' + dc.values['voucherHeader_cgn'];
		if(isDrillDown && dc.values['serviceID']=='getGeneralDetails')
		dc=createRowIndex(dc,'JV_GeneralGrid','entities_grid');
	}

function afterUpdateService(dc){
		 disableControls(0,true);
		if(str=="new")	window.location="GeneralVoucher.htm?"
		if(str=="close") window.close()
		return true;
	}

function onClickCancel(){
	window.location="GeneralVoucher.htm";
}

function getAccName(evnt) {
			PageManager.DescService.onblur(evnt);
		}

  function disableControls(frmIndex, isDisable){
			for(var i=0;i<document.forms[frmIndex].length;i++)
				document.forms[frmIndex].elements[i].disabled =isDisable;
		}

	//This will enable all the narration fields in the detail
		function enableControls(frmIndex, isDisable){
		//alert(document.forms[frmIndex].elements[14].name);
		//document.forms[frmIndex].elements[12].disabled=false;
		for(var i=14;i<=document.forms[frmIndex].length-17;i=i+5){
			document.forms[frmIndex].elements[i].disabled =isDisable;

			}
		}
		function edit(){
				var cgn=PageManager.DataService.getQueryField('cgNumber');
		 		if(cgn){
		 			document.forms[0].voucherHeader_cgn.disabled=true;
		 			document.forms[0].voucherHeader_voucherNumber.disabled=true;
		 			document.forms[0].voucherHeader_createdby.disabled=true;
		 			document.forms[0].voucherHeader_status.disabled=true;
		 			document.getElementById('submitGrid').style.display ="block";
					document.getElementById('modeOfExec').value="edit";
					enableControls(0,false);
		 	 	}
		}
		function modify(){
				var cgn=PageManager.DataService.getQueryField('cgNumber');
		 		if(cgn){
		  			document.getElementById('reverseRecord').style.display='block';
		 			var vcObj=document.getElementById('voucherHeader_newVcNo');
		 			vcObj.setAttribute('exilMustEnter','true');
		 			vcObj.disabled=false;
		 			var vdObj=document.getElementById('voucherHeader_effDate')
		 			vdObj.setAttribute('exilMustEnter','true');
		 			vdObj.disabled=false;
		 			document.getElementById('modeOfExec').value="modify";
		 			document.getElementById('reverseSubmit').style.display ="block";
		 	 	}
		}
		function hideButtons(){
			//document.getElementById('modGrid').style.display='none';
			document.getElementById('modGrid').style.display='block';
			document.getElementById('submitGrid').style.display ="none";
			//document.getElementById ('text1').style.display ="none";
		}
		function afterRefreshPage(dc){

				if(dc.values['databaseDate']!='' && dc.values['serviceID']=='cgNumber')
				{
				var dt=dc.values['databaseDate']
				document.getElementById('voucherHeader_voucherDate').value=dt;
				}



				//calculateTotal();
				var voucherHeader_voucherDate=dc.values['voucherHeader_voucherDate'];
				if(voucherHeader_voucherDate){
					voucherDate=formatDate2(voucherHeader_voucherDate);
					document.getElementById('voucherHeader_voucherDate').value=voucherDate;
				}
				var sm=PageManager.DataService.getQueryField('showMode');
				if(sm=="new"){
		 		    var createdBy=dc.values['current_UserID'];
					document.getElementById('voucherHeader_createdby').value=createdBy;
	 		    }
	 		    else
	 		    {
	 		     var createdById=dc.values['voucherHeader_createdbyId'];
	 		    	if(createdById!="undefined" && createdById*1 >0){
	 		    		document.getElementById('voucherHeader_createdby').value=dc.values['voucherHeader_createdby'];
 		    		}
	 		    }
				var voucherStatus=dc.values['voucherHeader_status'];
				//alert(voucherStatus);
				var voucherConfirmed=dc.values['voucherHeader_confirmed'];
				if(voucherConfirmed=='0')
					document.getElementById('voucherHeader_status').value="Unconfirmed";
				else if(voucherConfirmed=='1' && voucherStatus=='0')
					document.getElementById('voucherHeader_status').value="Confirmed";
				else if(voucherStatus=='1')
					document.getElementById('voucherHeader_status').value="Reversed";
				else if(voucherStatus=='2')
					document.getElementById('voucherHeader_status').value="Reversal";


				var tab=dc.grids['JV_GeneralGrid'];
				if(tab){
					var count1 = 0,count2=0;
					for(var i=1;i<tab.length;i++){
						count1 += parseFloat(tab[i][2]);
						count2 += parseFloat(tab[i][3]);
					}
					document.getElementById("debitTotal").value = count1;
					document.getElementById("creditTotal").value = count2;
				}
		}
		function showglEntry()
		{
			if(!PageValidator.validateForm())
				return false;
			var trObj;
			var tObj=document.getElementById("showEntries");
			var cr=0,dr=0;
			tObj.style.display="block";
			var tableObj=document.getElementById("entries");
			var gltable= document.getElementById("JV_GeneralGrid");
			for(var i=tableObj.rows.length-1;i>=2;i--)
			{
				tableObj.deleteRow(i);
			}
			for(var i=1;i<gltable.rows.length;i++)
			{

				code=PageManager.DataService.getControlInBranch(gltable.rows[i],'chartOfAccounts_glCode').value;
				name=PageManager.DataService.getControlInBranch(gltable.rows[i],'chartOfAccounts_name').value;
				debit=PageManager.DataService.getControlInBranch(gltable.rows[i],'voucherDetail_debitAmount').value;
				dr=dr+debit;
				credit=PageManager.DataService.getControlInBranch(gltable.rows[i],'voucherDetail_creditAmount').value;
				cr=cr+credit
				narration=PageManager.DataService.getControlInBranch(gltable.rows[i],'voucherDetail_narration').value;
				var Obj=PageManager.DataService.getControlInBranch(tableObj.rows[1],"display_Code");
				trObj=PageManager.DataService.getRow(Obj);
				 if(i==1){
								newRow=trObj;
								objt1=PageManager.DataService.getControlInBranch(newRow,'display_Code');
								objt2=PageManager.DataService.getControlInBranch(newRow,'display_Head');
								objt3=PageManager.DataService.getControlInBranch(newRow,'display_Debit');
								objt4=PageManager.DataService.getControlInBranch(newRow,'display_Credit');
								objt5=PageManager.DataService.getControlInBranch(newRow,'display_Narration');
								if(code=="") code=" -"; if(name=="") name=" -"; if(debit=="") debit=" 0"; if(credit=="") credit=" 0"; if(narration=="") narration=" -";
								objt1.innerHTML=code;
								objt2.innerHTML=name;
								objt3.innerHTML=debit;
								objt4.innerHTML=credit;
								objt5.innerHTML=narration
				 }else{

						 var newRow=trObj.cloneNode(true);
						newRow=tableObj.tBodies[0].appendChild(newRow);
						objt1=PageManager.DataService.getControlInBranch(newRow,'display_Code');
						objt2=PageManager.DataService.getControlInBranch(newRow,'display_Head');
						objt3=PageManager.DataService.getControlInBranch(newRow,'display_Debit');
						objt4=PageManager.DataService.getControlInBranch(newRow,'display_Credit');
						objt5=PageManager.DataService.getControlInBranch(newRow,'display_Narration');
						if(code=="") code=" -"; if(name=="") name=" -"; if(debit=="") debit=" 0"; if(credit=="") credit=" 0"; if(narration=="") narration=" -";
						objt1.innerHTML=code;
						objt2.innerHTML=name;
						objt3.innerHTML=debit;
						objt4.innerHTML=credit;
						objt5.innerHTML=narration;
				}
			}


			 var dSum=0;
			 var cSum=0;
			for(var i=1;i<tableObj.rows.length;i++)
			{

			  var dObj=PageManager.DataService.getControlInBranch(tableObj.rows[i],"display_Debit");
			  var cObj=PageManager.DataService.getControlInBranch(tableObj.rows[i],"display_Credit");
			 if(!isNaN(parseFloat(dObj.innerHTML)))
			 {
			   var sum=(parseFloat(dObj.innerHTML));
			   dSum=dSum+sum;
			 }
			 if(!isNaN(parseFloat(cObj.innerHTML)))
			 {
			   var sum=(parseFloat(cObj.innerHTML));
			   cSum=cSum+sum;
			 }
			}
			var newRow=trObj.cloneNode(true);
			newRow=tableObj.tBodies[0].appendChild(newRow);
			objt1=PageManager.DataService.getControlInBranch(newRow,'display_Code');
			objt2=PageManager.DataService.getControlInBranch(newRow,'display_Head');
			objt3=PageManager.DataService.getControlInBranch(newRow,'display_Debit');
			objt4=PageManager.DataService.getControlInBranch(newRow,'display_Credit');
			objt5=PageManager.DataService.getControlInBranch(newRow,'display_Narration');
			objt1.innerHTML=" ";
			objt2.innerHTML=" ";
			objt3.innerHTML=dSum;
			objt4.innerHTML=cSum;
			objt5.innerHTML=" ";

	}


</script>

	</head>
	<title>Jounal Voucher</title>
	<body bgcolor="#ffffff" bottommargin="0" topmargin="0" rightmargin="0" leftmargin="0"
		 marginheight="0" marginwidth="0" onLoad="onloadTasks();" onKeyDown ="CloseWindow(event); "><!------------------ Header Begins Begins--------------------->
		<form name="JV_General">
		<input type="hidden" name="budgetCheckRequired" id="budgetCheckRequired" value="true">
		<input type="hidden" name="modeOfExec" id="modeOfExec" value="new">
		<input type="hidden" name="tType" id="tType" value="J">
		<input type="hidden" name="cgnNum" id="cgnNum">
		<input type="hidden" name="voucherHeader_id" id="voucherHeader_id">
	<table width="100%" border=0 cellpadding="1" cellspacing="0">
			<tr>
			<td valign="top" class="normaltext"><!------------Content begins here ------------------>
						<table width="100%" border=0 cellpadding="3" cellspacing="0">
        <TBODY>
							<tr class="row1">
								<td class="rowheader" valign="center" colspan="4" width="560"><span class="headerwhite2">General Voucher</span></td>
							</tr>

							<tr class="row2" id="cgnLabel" name="cgnLabel" style="DISPLAY: none">
									<td><div align="right" valign="center" class="normaltext" > CG&nbsp;Number</div>
									</td>
									<td>
										<input class="fieldinput" name="voucherHeader_cgn" id="voucherHeader_cgn" readOnly exilMustEnter ="true" >
									</td>
									<td>&nbsp;</td>
								<td>&nbsp;</td>

								</tr>

							<tr class="row1">
								<td>
								<div  align="right" valign="center" class="normaltext"> Voucher Number<SPAN class=leadon>*</SPAN> </div>
								</td>
								<td><input class="fieldinput" name="voucherHeader_voucherNumber" id="voucherHeader_voucherNumber" maxlength="5" exilMustEnter="true" exilDataType="exilUnsignedInt" ></td>

								<td><div  align="right" valign="center" class="normaltext" >Voucher Date<span class="leadon">*</span></div>
								</td>
								<td>
								<INPUT  class="datefieldinput" name="voucherHeader_voucherDate" id="voucherHeader_voucherDate" style="WIDTH: 101px;  HEIGHT: 19px" size   ="13" onkeyup="DateFormat(this,this.value,event,false,'3')" exilMustEnter="true"
            exilCalendar="true">

									</td>
								</tr>

							<tr class="row2">
								<td>
								<div  align="right" valign="center" class="normaltext">  Fund<SPAN class=leadon>*</SPAN> </div>
								</td>
								<td><SELECT class=fieldinput id=fund_id name="fund_id" exilMustEnter="true" exilListSource="fundName"></SELECT>&nbsp;
								</td>
								<td style="DISPLAY:  none" ><div  align="right" valign="center" class="normaltext"> Financing Source<SPAN class=leadon>*</SPAN> </div></td>
								<td style="DISPLAY:  none" ><SELECT class=fieldinput id=fundSource_id name="fundSource_id"  exilListSource="fundSourceName"></SELECT>&nbsp;
								</td>
							</tr>

							<tr class="row1">
							<td >
            							<DIV align=right class="normaltext" >Department<SPAN class=leadon>*</SPAN></DIV>
									</td>
									<td  >
                    					<SELECT  id="GeneralLedgerMIS_departmentid" name="GeneralLedgerMIS_departmentid" class="fieldinput" exilMustEnter="true" exilListSource="departmentList">
           								</SELECT>&nbsp;
									</td>
									 <td >
            							<DIV align=right class="normaltext" >Zone<SPAN class=leadon>*</SPAN></DIV>
									</td>
									<td  >
                    					<SELECT  id="GeneralLedgerMIS_zoneid" name="GeneralLedgerMIS_zoneid" class="fieldinput" exilMustEnter="true" exilListSource="zoneList">
           								</SELECT>&nbsp;
									</td>
							</tr>
							<tr class="row2">
							<td align="right" valign="center" >
            							<DIV align=right class="normaltext" >Scheme<span class="leadon">*</DIV>
									</td>
									<td  >
                    					<SELECT  id="GeneralLedgerMIS_schemeid" name="GeneralLedgerMIS_schemeid" class="fieldinput" exilMustEnter="true" exilListSource="schemeList">
           								</SELECT>&nbsp;
									</td>
									<td align="right" valign="center" >
            							<DIV align=right class="normaltext" >Cost Centre<span class="leadon">*</DIV>
									</td>
									<td  >
                    					<SELECT  id="GeneralLedgerMIS_costcenterid" name="GeneralLedgerMIS_costcenterid" class="fieldinput" exilMustEnter="true" exilListSource="costList">
           								</SELECT>&nbsp;
									</td>
							</tr>


							<tr class="row1">
							  <td style="DISPLAY:  none" ><div  align="right" valign="center" class="normaltext">Narration</div></td>
							  <td style="DISPLAY:  none" ><TEXTAREA class=narrationfieldinput id=voucherHeader_description name=voucherHeader_description rows=3 cols=40 exilDataType="exilAnyChar" maxlength="250" cols="20"></TEXTAREA>
							  <td id="statusLabel"><div  align="right" valign="center" class="normaltext"> Status</div></td>
							  <td id="StatusText">
								<input class="fieldinput" name="voucherHeader_status" id="voucherHeader_status" readonly>
							  </td>
							 </tr>

							<tr class="row2" id="createdInfo">
							  <td><div  align="right" valign="center" class="normaltext" exilMustEnter="true" >Created By</div></td>
							  <td><input class="fieldinput" name="voucherHeader_createdby" id="voucherHeader_createdby" readonly></td>
						  	 </tr>


                              <tr class="row1">
							  <td align="middle" colspan=4 width="100%" >&nbsp;

							  </td>
							  </tr></TBODY>
                              </table>
						       <table width="100%" border="0" cellpadding="0" cellspacing="0" ID="Table1">
                                  <tr>
                                    <td>
                                    <table  width="78%" border="1" cellpadding="0" cellspacing="0" ID="JV_GeneralGrid">
                                      <tr class="rowheader">
                                        <td width="10%"  class="columnheader"><div align="center" class="columnheader">Account Code</div></td>
                                        <td width="20%"><div align="center" class="columnheader">Account Head</div></td>
                                        <td width="15%"><div align="center" class="columnheader">Debit Amount</div></td>
                                        <td width="15%"><div align="center" class="columnheader">Credit Amount</div></td>
                                        <td width="10%"><div align="center" class="columnheader">Narration</div></td>
                                        <td width="3%"><div align="center" class="columnheader">Details</div></td>
                                     </tr>

                                       <tr>
                                        <td>
											<input class="normaltext" size=10 name="chartOfAccounts_glCode" id="chartOfAccounts_glCode" onBlur="getAccName(event)" style="WIDTH: 97px; HEIGHT:
                  19px" exilDataType ="exilAlphaNumeric" exilInGrid="true"
                  exilDataSource=""
                  exilDescField="chartOfAccounts_name"><IMG
                  id=IMG1 onclick=openSearch(this)
                  height=22 src="/egi/resources/erp2/images/plus1.gif" width=25 align=top border=0 >
										</td>
                                        <td>
											<input class="normaltext" size=23 NAME="chartOfAccounts_name" id="chartOfAccounts_name" style ="WIDTH: 176px; HEIGHT: 19px"
                  readOnly>
                                        </td>
                                        <td>
											<input class="fieldinput-right" size=18 NAME="voucherDetail_debitAmount" id="voucherDetail_debitAmount" onBlur="colTotal(this,'debitTotal')" style   ="WIDTH: 139px; HEIGHT: 19px" exilDataType="exilUnsignedDecimal" exilMax="999999.99" exilMin="0">
										</td>
                                        <td>
											<INPUT class="fieldinput-right" name="voucherDetail_creditAmount" id="voucherDetail_creditAmount" onBlur="colTotal(this,'creditTotal')" exilDataType="exilUnsignedDecimal" exilMax="999999.99" exilMin="0" >
                                        </td>
                                        <td>
											<input class="normaltext" NAME="voucherDetail_narration" id="voucherDetail_narration" maxlength="250" onKeyDown="addNewRow('JV_GeneralGrid','chartOfAccounts_glCode')" style="WIDTH: 124px; HEIGHT: 19px" size="11" exilDataType="exilAnyChar">
                                        </td>
                                       <td><A  id=A1 style="WIDTH: 10px; HEIGHT: 19px" onclick ="openDetails(this,'chartOfAccounts_glCode')"
                 href="#" >Click</A></td>
                                       </tr>

                                      </table>
                                      </td></tr><!--new -->


                                  <tr>
                                    <td>
										<table width="78%" border="1" cellpadding="0" cellspacing="0" ID="buttonInTable" >
                                      <tr >
                                        <td width="10%"><div align="center"></div></td>
                                        <td width="20%"><div align="center"></div></td>
                                        <td width="15%"><div align="center"></div></td>
                                        <td width="15%"><div align="center"></div></td>
                                        <td width="15%"><div align="center"></div></td>
                                        <td width="3%"><div align="center"></div></td>
                                     </tr>

				   <tr>
					<td>
						<span style="WIDTH: 120px; HEIGHT: 19px"></span>
					</td>
					<td>
						<span style ="WIDTH: 178px; HEIGHT: 15px" class="normaltext" >Total</span>
					</td>
					<td>
						<input class="fieldinput-right" size=18 id="debitTotal" name="debitTotal"  style   ="WIDTH: 139px; HEIGHT: 19px" readOnly>
					</td>
					<td>
						<INPUT class="fieldinput-right" id="creditTotal" name="creditTotal"
							style="WIDTH: 139px; HEIGHT: 19px" readOnly >

					</td>
					<td><span style="WIDTH: 124px; HEIGHT: 19px" id=SPAN1></span>
					</td>
					<td><span style="WIDTH: 44px; HEIGHT: 19px"></span></td>
                                       </tr>

                                      </table>
                                      </td></tr>

                                      </table>

                  <table width="100%" border="0" cellpadding="0" cellspacing="0" ID="buttonTable">
                  <tr>
                  <td>

      			<tr class="row2">
				<td height="25" colspan="4" valign="bottom" class="smalltext"><p class="smalltext">
					<span class="leadon">*</span>- Mandatory Fields</p>
				</td>
			</tr><!--  Buttons for Request Form starts here -->
			<tr class="row1">
				<td colspan="4" align="middle"><!-- Buttons Start Here -->
					<table border="0" cellpadding="0" cellspacing="0"></table>
									<table border="0" cellpadding="0" cellspacing="0">
										<tr id="modGrid">
											<td align="right">
											<IMG height=18 src="/egi/resources/erp2/images/Button_leftside.gif" width=6></td>
											<td bgcolor="#fe0000" valign="center" nowrap><A class=buttonprimary onclick=modify();  href="#">Reverse</A></td>
											<td>
											<IMG height=18 src="/egi/resources/erp2/images/Button_rightside.gif" width=6></td>
											<td><IMG src="/egi/resources/erp2/images/spacer.gif" width=8></td>

										</tr>
										<tr class="row1">
													<td colspan="4" align="middle">
														<table border="0" cellpadding="0" cellspacing="0" id="buttons">
															<tr id="backbutton"><td align="center">
															<IMG height=18 src="/egi/resources/erp2/images/Button_leftside.gif" width=6></td>
															<td bgcolor="#fe0000" valign="center" nowrap><A class=buttonprimary onclick="back(window.self)"  href="#">Back</A></td>
															<td><IMG height=18 src="/egi/resources/erp2/images/Button_rightside.gif" width=6></td>
															<td><IMG src="/egi/resources/erp2/images/spacer.gif" width=8></td>
															</tr>

														</table>
													</td>
												</tr>
										<tr>
										  <td colspan=4></td>
										<tr>
										<tr id="reverseRecord" class="row1" style="DISPLAY: none"
             ><!--<td>
													<div  align="right" valign="center" class="normaltext"> Voucher Number<SPAN class=leadon>*</SPAN> </div>
															</td>
															<td>
																<input class="fieldinput" name="voucherHeader_newVcNo" id="voucherHeader_newVcNo" maxlength="10"  exilDataType="exilAnyChar" >
															</td>

															<td><div  align="right" valign="center" class="normaltext" >Voucher Date<span class="leadon">*</span></div>
															</td>
															<td>
															<INPUT  class="datefieldinput" name="voucherHeader_effDate" id="voucherHeader_effDate" style="WIDTH: 101px;  HEIGHT: 19px" size   ="13"   exilDataType="exilPastDate"
																exilCalendar="true">

											</td>-->
											<td ><span  align="right" valign="center" class="normaltext"> Voucher Number<SPAN class=leadon>*</SPAN>
												 <input name="voucherHeader_newVcNo" id="voucherHeader_newVcNo" maxlength="5"  style="WIDTH: 75px; HEIGHT: 22px" size="8"
												   exilDataType="exilUnsignedInt"> </span> </td>
											<td></td>
											<td ><span  align="right" valign="center" class="normaltext" >Voucher Date<span class="leadon">*</span>
											<INPUT
																                  class="datefieldinput" name="voucherHeader_effDate" id="voucherHeader_effDate"
                  style="WIDTH: 101px; HEIGHT: 19px" size="13" onkeyup="DateFormat(this,this.value,event,false,'3')"
                  exilCalendar="true"></span></td>
											<td></td>
										</tr>
										<tr>
										  <td colspan=4></td>
										<tr></tr>
							  </table>
									<table border="0" cellpadding="0" cellspacing="0">
									<tr id="submitGrid">
										<td align="right" id="saveandnewlb">
										<IMG height=18 src="/egi/resources/erp2/images/Button_leftside.gif" width=7></td>
										<td bgcolor="#fe0000" valign="center" nowrap id="saveandnewb"><A class=buttonprimary onclick="return ButtonPress('savenew');" href="#">Save & New</A></td>
										<td id="saveandnewrb">
										<IMG height=18 src="/egi/resources/erp2/images/Button_rightside.gif" width=7></td>
										<td><IMG src="/egi/resources/erp2/images/spacer.gif" width=8></td>
										<td><IMG height=18 src="/egi/resources/erp2/images/Button_leftside.gif" width=7></td>
										<td bgcolor="#fe0000" valign="center" nowrap><A class=buttonprimary onclick="return ButtonPress('saveclose');" href="#">Save & Close</A></td>
										<td>
										<IMG height=18 src="/egi/resources/erp2/images/Button_rightside.gif" width=7></td>
										<td><IMG src="/egi/resources/erp2/images/spacer.gif" width=8></td>
										<td align="right">
										<IMG height=18 src="/egi/resources/erp2/images/Button_second_leftside.gif" width=6></td>
										<td bgcolor="#ffffff" valign="center" nowrap background="/egi/resources/erp2/images/Button_second_middle.gif"><A class=buttonsecondary onclick=onClickCancel() href="#">Cancel</A></td>
										<td>
										<IMG height=18 src="/egi/resources/erp2/images/Button_second_rightside.gif" width=6></td>
										<td><IMG src="/egi/resources/erp2/images/spacer.gif" width=8></td>
										<td align="right">
										<IMG height=18 src="/egi/resources/erp2/images/Button_second_leftside.gif" width=6></td>
										<td bgcolor="#ffffff" valign="center" nowrap background="/egi/resources/erp2/images/Button_second_middle.gif"><A class=buttonsecondary onClick=window.close(); href="#">Close</A></td>
										<td><IMG height=18 src="/egi/resources/erp2/images/Button_second_rightside.gif" width=6></td>
										<td><IMG src="/egi/resources/erp2/images/spacer.gif" width=8></td>
										<td><IMG height=18 src="/egi/resources/erp2/images/Button_second_leftside.gif" width=6></td>
										<td bgcolor="#ffffff" valign="center" nowrap background="/egi/resources/erp2/images/Button_second_middle.gif"><A class=buttonsecondary onclick="showglEntry();" href="#">Show GLEntry</A></td>
										<td><IMG height=18 src="/egi/resources/erp2/images/Button_second_rightside.gif" width=6></td>
										</tr></table>
										<table border="0" cellpadding="0" cellspacing="0">
									<tr id="reverseSubmit">

									<td align="right">
									<IMG height=18 src="/egi/resources/erp2/images/Button_leftside.gif" width=7></td>
									<td bgcolor="#fe0000" valign="center" nowrap><A class=buttonprimary onclick="return ButtonPress('saveclose');" href="#">Submit</A></td>
									<td>
									<IMG height=18 src="/egi/resources/erp2/images/Button_rightside.gif" width=7></td>
									<td><IMG src="/egi/resources/erp2/images/spacer.gif" width=8></td>
									<td align="right">
									<IMG height=18 src="/egi/resources/erp2/images/Button_second_leftside.gif" width=6></td>
									<td bgcolor="#ffffff" valign="center" nowrap background="/egi/resources/erp2/images/Button_second_middle.gif"><A class=buttonsecondary onClick=window.close(); href="#">Close</A></td>
									<td>
									<IMG height=18 src="/egi/resources/erp2/images/Button_second_rightside.gif" width=6></td>
						</tr></table>
							</tr></table><!-- Buttons End Here --></td></tr></table><!------------ Content ends here ------------------><!------------Right Navigation Ends here------------------><!---------------- Footer begins here ----------><!---------------- Footer ends here ---------->
							<table width="100%" border=0 cellpadding="3" cellspacing="0" id="showEntries" name="showEntries" style="DISPLAY: none">
							<tr class="row2">
							<td colspan=4>
							<table width="100%" align=center border="0" cellpadding="0" cellspacing="0" >
							<tr class="row1" height="25">
							 <TD class=displaydata align=center ><h4>GLEntry</h4></TD></tr>
							</table>
							</td>
							</tr>
							<tr><td>
							<table width="80%" border="1" cellpadding="0" cellspacing="0" align=center id="entries" name="entries">
							<tr class="rowheader">
								<td  class="columnheader"><div align="center" valign="center" class="columnheader"> Account Code</div></td>
								<td  class="columnheader"><div align="center" valign="center" class="columnheader"> Account Head</div></td>
								<td  class="columnheader"><div align="center" valign="center" class="columnheader"> Debit </div></td>
								<td  class="columnheader"><div align="center" valign="center" class="columnheader"> Credit</div></td>
								<td  class="columnheader"><div align="center" valign="center" class="columnheader"> Narration</div></td>
							</tr>
							<tr class="normaltext">
								<td ><div name="display_Code"  id="display_Code"   readOnly maxLength=10 tabIndex=0>&nbsp;</div></td>
								<td ><div name="display_Head"  id="display_Head"  readOnly maxLength=10 tabIndex=0>&nbsp;</div></td>
								<td ><div name="display_Debit"  id="display_Debit"  readOnly maxLength=10 tabIndex=0>&nbsp;</div></td>
								<td ><div name="display_Credit"  id="display_Credit"  readOnly maxLength=10 tabIndex=0>&nbsp;</div></td>
								<td ><div name="display_Narration" id="display_Narration"  readOnly maxLength=10 tabIndex=0>&nbsp;</div></td>
							</tr>
							</table>
							</td>
							</tr>
						</table>

	<table id="entities_grid" width="20%" style="DISPLAY: none">
		<tr>
			<td></td>
			<td></td>
			<td></td>
			<td></td>
		</tr>
		<tr>
			<td><input id="grid_detTypeId" name="grid_detTypeId" style="WIDTH: 1px"
     ></td>
			<td><input id="grid_detKeyId" name="grid_detKeyId" style="WIDTH: 1px"
     ></td>
			<td><input id="grid_detValue" name="grid_detValue" style="WIDTH: 1px"
     ></td>
			<td><input id="grid_rowIndex" name="grid_rowIndex" style="WIDTH: 1px"
     ></td>
		</tr>
	</table>

</form>
</body>
</html>

