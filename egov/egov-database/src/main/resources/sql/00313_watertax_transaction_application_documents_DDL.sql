
CREATE TABLE egwtr_application_documents
(
  	ID bigint NOT NULL, 
    CONNECTIONDETAILSID 	bigint NOT NULL, 
    DOCUMENTNAMESID 	    bigint NOT NULL,
    DOCUMENTNUMBER			character varying(50) NOT NULL,
	DOCUMENTDATE			date NOT NULL,
	DESCRIPTION				character varying(255),
    CREATEDBY				bigint NOT NULL,
	CREATEDDATE     		timestamp without time zone NOT NULL,
	LASTMODIFIEDDATE		timestamp without time zone NOT NULL,
	LASTMODIFIEDBY			bigint NOT NULL,
	VERSION					numeric NOT NULL,  
    CONSTRAINT pk_application_documents PRIMARY KEY (id),
    CONSTRAINT fk_applicationdocs_connectiondetailsid FOREIGN KEY (CONNECTIONDETAILSID)
      REFERENCES egwtr_connectiondetails (id),
    CONSTRAINT fk_applicationdocs_documentnamesid FOREIGN KEY (DOCUMENTNAMESID)
      REFERENCES egwtr_document_names (id),
    CONSTRAINT fk_applicationdocs_createdby FOREIGN KEY (createdby)
      REFERENCES eg_user (id),
    CONSTRAINT fk_applicationdocs_lastmodifiedby FOREIGN KEY (lastmodifiedby)
      REFERENCES eg_user (id)
);

CREATE INDEX IDX_APPLICATIONDOCS_CONNECTIONDETAILSID ON EGWTR_APPLICATION_DOCUMENTS USING BTREE (CONNECTIONDETAILSID);
CREATE INDEX IDX_APPLICATIONDOCS_DOCUMENTNAMESID ON EGWTR_APPLICATION_DOCUMENTS USING BTREE (DOCUMENTNAMESID);

CREATE SEQUENCE SEQ_EGWTR_APPLICATION_DOCUMENTS;

CREATE TABLE egwtr_documents
(
  	FILESTOREID bigint NOT NULL,
  	APPLICATIONDOCUMENTSID bigint NOT NULL
);

--rollback DROP TABLE EGWTR_DOCUMENTS;
--rollback DROP TABLE EGWTR_APPLICATION_DOCUMENTS;
--rollback DROP SEQUENCE SEQ_EGWTR_APPLICATION_DOCUMENTS;
