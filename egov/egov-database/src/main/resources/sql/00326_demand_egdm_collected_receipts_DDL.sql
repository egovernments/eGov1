CREATE TABLE EGDM_COLLECTED_RECEIPTS
(
  ID BIGINT NOT NULL,
  ID_DEMAND_DETAIL BIGINT NOT NULL,
  RECEIPT_NUMBER VARCHAR(50) NOT NULL,
  RECEIPT_DATE TIMESTAMP WITHOUT TIME ZONE NOT NULL,
  RECEIPT_AMOUNT DOUBLE PRECISION NOT NULL,
  REASON_AMOUNT DOUBLE PRECISION,
  STATUS VARCHAR(1) NOT NULL,
  UPDATED_TIME TIMESTAMP WITHOUT TIME ZONE NOT NULL 
);

ALTER TABLE egdm_collected_receipts ADD CONSTRAINT EGDM_COLLECTED_RECEIPTS_PK PRIMARY KEY(ID);
ALTER TABLE egdm_collected_receipts add CONSTRAINT EG_DMD_DETAIL_ID FOREIGN KEY(ID_DEMAND_DETAIL) REFERENCES EG_DEMAND_DETAILS(ID);

CREATE INDEX EGDM_COLLRCTS_DMDDETAIL_INDEX ON EGDM_COLLECTED_RECEIPTS (ID_DEMAND_DETAIL DESC);

CREATE SEQUENCE seq_egdm_collected_receipts;

--DROP TABLE EGDM_COLLECTED_RECEIPTS;
--DROP SEQUENCE seq_egdm_collected_receipts;
